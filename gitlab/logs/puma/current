2020-10-21_14:57:17.87274 {"timestamp":"2020-10-21T14:57:17.872Z","pid":405,"message":"Puma starting in cluster mode..."}
2020-10-21_14:57:17.87281 {"timestamp":"2020-10-21T14:57:17.872Z","pid":405,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:57:17.87281 {"timestamp":"2020-10-21T14:57:17.872Z","pid":405,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:57:17.87282 {"timestamp":"2020-10-21T14:57:17.872Z","pid":405,"message":"* Environment: production"}
2020-10-21_14:57:17.87282 {"timestamp":"2020-10-21T14:57:17.872Z","pid":405,"message":"* Process workers: 2"}
2020-10-21_14:57:17.87282 {"timestamp":"2020-10-21T14:57:17.872Z","pid":405,"message":"* Preloading application"}
2020-10-21_14:57:38.74572 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:57:40.51846 {"timestamp":"2020-10-21T14:57:40.518Z","pid":405,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:57:40.51859 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:57:40.51867 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:57:40.51868   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:57:40.51868   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:57:40.51868   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:57:40.51869   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:57:40.51869   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:57:40.51869   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:57:40.51870   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:57:40.51870   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:57:40.51870   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:57:40.51871   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:57:40.51871   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:57:40.51871   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:57:40.51873   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:57:40.51873   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:57:40.51875   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:57:40.51876   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:57:40.51876   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:57:40.51876   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:57:40.51877   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:57:40.51877   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:57:40.51877   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:57:40.51877   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:57:40.51880   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:57:40.51880   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:57:40.51881   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:57:40.51881   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:57:40.51881   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:57:40.51882   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:57:40.51882   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:57:40.51882   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:57:40.51882   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:57:40.51884   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:57:40.51884   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:57:40.51884   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:57:40.51885   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:57:40.51885   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:57:40.51885   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:57:40.51886   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:57:40.51886   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:57:40.51887   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:57:40.51887   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:57:40.51888   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:57:40.51888   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:57:40.51888   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:57:40.51889   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:57:40.51889   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:57:40.51889   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:57:40.51890   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:57:40.51890   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:57:40.51890   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:57:40.51891   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:57:40.51892   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:57:40.51892   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:57:40.51893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:57:40.51893   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:57:40.51893   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:57:40.51894   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:57:40.51894   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:57:40.51894   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:57:40.51894   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:57:40.51895   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:57:40.51895   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:57:40.51896   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:57:40.51897   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:57:40.51897   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:57:40.51897   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:57:40.51897   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:57:40.51898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:57:40.51898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:57:40.51898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:57:40.51898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:57:40.51899   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:57:40.51900   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:57:40.51900   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:57:40.51901   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:57:41.26060 {"timestamp":"2020-10-21T14:57:41.260Z","pid":690,"message":"Puma starting in cluster mode..."}
2020-10-21_14:57:41.26062 {"timestamp":"2020-10-21T14:57:41.260Z","pid":690,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:57:41.26063 {"timestamp":"2020-10-21T14:57:41.260Z","pid":690,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:57:41.26064 {"timestamp":"2020-10-21T14:57:41.260Z","pid":690,"message":"* Environment: production"}
2020-10-21_14:57:41.26064 {"timestamp":"2020-10-21T14:57:41.260Z","pid":690,"message":"* Process workers: 2"}
2020-10-21_14:57:41.26064 {"timestamp":"2020-10-21T14:57:41.260Z","pid":690,"message":"* Preloading application"}
2020-10-21_14:57:53.49185 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:57:54.11319 {"timestamp":"2020-10-21T14:57:54.113Z","pid":690,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:57:54.11333 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:57:54.11340 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:57:54.11341   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:57:54.11341   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:57:54.11341   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:57:54.11342   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:57:54.11342   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:57:54.11342   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:57:54.11342   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:57:54.11342   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:57:54.11342   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:57:54.11343   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:57:54.11343   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:57:54.11343   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:57:54.11344   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:57:54.11344   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:57:54.11345   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:57:54.11345   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:57:54.11345   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:57:54.11345   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:57:54.11345   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:57:54.11346   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:57:54.11346   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:57:54.11346   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:57:54.11347   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:57:54.11347   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:57:54.11347   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:57:54.11348   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:57:54.11348   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:57:54.11348   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:57:54.11348   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:57:54.11349   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:57:54.11349   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:57:54.11350   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:57:54.11350   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:57:54.11351   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:57:54.11351   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:57:54.11373   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:57:54.11374   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:57:54.11374   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:57:54.11374   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:57:54.11375   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:57:54.11375   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:57:54.11376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:57:54.11376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:57:54.11376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:57:54.11376   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:57:54.11376   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:57:54.11377   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:57:54.11377   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:57:54.11377   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:57:54.11377   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:57:54.11378   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:57:54.11378   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:57:54.11379   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:57:54.11379   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:57:54.11379   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:57:54.11379   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:57:54.11379   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:57:54.11380   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:57:54.11380   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:57:54.11380   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:57:54.11380   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:57:54.11380   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:57:54.11381   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:57:54.11382   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:57:54.11382   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:57:54.11382   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:57:54.11383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:57:54.11383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:57:54.11383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:57:54.11383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:57:54.11383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:57:54.11384   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:57:54.11385   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:57:54.11385   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:57:54.11385   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:57:54.86271 {"timestamp":"2020-10-21T14:57:54.862Z","pid":880,"message":"Puma starting in cluster mode..."}
2020-10-21_14:57:54.86278 {"timestamp":"2020-10-21T14:57:54.862Z","pid":880,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:57:54.86284 {"timestamp":"2020-10-21T14:57:54.862Z","pid":880,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:57:54.86289 {"timestamp":"2020-10-21T14:57:54.862Z","pid":880,"message":"* Environment: production"}
2020-10-21_14:57:54.86294 {"timestamp":"2020-10-21T14:57:54.862Z","pid":880,"message":"* Process workers: 2"}
2020-10-21_14:57:54.86300 {"timestamp":"2020-10-21T14:57:54.862Z","pid":880,"message":"* Preloading application"}
2020-10-21_14:58:07.59993 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:58:08.41690 {"timestamp":"2020-10-21T14:58:08.416Z","pid":880,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:58:08.41704 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:58:08.41711 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:58:08.41711   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:58:08.41711   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:58:08.41712   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:58:08.41712   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:58:08.41712   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:58:08.41712   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:58:08.41712   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:58:08.41713   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:58:08.41713   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:58:08.41713   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:58:08.41713   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:58:08.41713   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:58:08.41714   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:58:08.41715   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:58:08.41715   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:58:08.41716   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:58:08.41716   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:58:08.41716   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:58:08.41716   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:58:08.41717   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:58:08.41717   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:58:08.41717   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:58:08.41718   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:58:08.41718   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:58:08.41718   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:58:08.41719   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:58:08.41719   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:58:08.41719   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:58:08.41719   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:58:08.41719   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:58:08.41720   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:58:08.41721   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:58:08.41721   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:58:08.41721   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:58:08.41721   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:58:08.41721   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:58:08.41722   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:58:08.41722   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:58:08.41722   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:58:08.41723   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:58:08.41723   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:58:08.41723   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:58:08.41724   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:58:08.41724   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:58:08.41724   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:58:08.41725   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:58:08.41725   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:58:08.41725   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:58:08.41725   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:58:08.41725   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:58:08.41726   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:58:08.41726   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:58:08.41727   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:58:08.41727   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:58:08.41727   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:58:08.41727   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:58:08.41727   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:58:08.41728   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:58:08.41728   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:58:08.41728   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:58:08.41728   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:58:08.41728   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:58:08.41729   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:58:08.41730   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:58:08.41730   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:58:08.41730   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:58:08.41730   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:58:08.41730   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:58:08.41731   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:58:08.41731   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:58:08.41731   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:58:08.41731   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:58:08.41732   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:58:08.41733   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:58:08.41733   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:58:09.09712 {"timestamp":"2020-10-21T14:58:09.096Z","pid":1138,"message":"Puma starting in cluster mode..."}
2020-10-21_14:58:09.09713 {"timestamp":"2020-10-21T14:58:09.096Z","pid":1138,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:58:09.09713 {"timestamp":"2020-10-21T14:58:09.096Z","pid":1138,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:58:09.09714 {"timestamp":"2020-10-21T14:58:09.096Z","pid":1138,"message":"* Environment: production"}
2020-10-21_14:58:09.09714 {"timestamp":"2020-10-21T14:58:09.096Z","pid":1138,"message":"* Process workers: 2"}
2020-10-21_14:58:09.09714 {"timestamp":"2020-10-21T14:58:09.096Z","pid":1138,"message":"* Preloading application"}
2020-10-21_14:58:24.22527 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:58:25.03754 {"timestamp":"2020-10-21T14:58:25.037Z","pid":1138,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:58:25.03769 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:58:25.03776 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:58:25.03776   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:58:25.03776   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:58:25.03777   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:58:25.03777   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:58:25.03777   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:58:25.03777   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:58:25.03777   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:58:25.03778   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:58:25.03778   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:58:25.03778   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:58:25.03778   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:58:25.03778   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:58:25.03779   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:58:25.03780   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:58:25.03780   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:58:25.03780   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:58:25.03780   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:58:25.03780   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:58:25.03781   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:58:25.03781   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:58:25.03781   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:58:25.03781   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:58:25.03782   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:58:25.03782   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:58:25.03783   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:58:25.03784   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:58:25.03784   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:58:25.03784   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:58:25.03784   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:58:25.03785   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:58:25.03785   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:58:25.03786   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:58:25.03786   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:58:25.03786   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:58:25.03786   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:58:25.03787   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:58:25.03787   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:58:25.03787   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:58:25.03787   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:58:25.03788   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:58:25.03788   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:58:25.03789   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:58:25.03789   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:58:25.03789   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:58:25.03789   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:58:25.03789   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:58:25.03790   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:58:25.03790   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:58:25.03790   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:58:25.03790   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:58:25.03791   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:58:25.03791   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:58:25.03792   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:58:25.03792   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:58:25.03792   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:58:25.03792   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:58:25.03793   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:58:25.03793   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:58:25.03793   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:58:25.03793   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:58:25.03793   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:58:25.03794   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:58:25.03795   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:58:25.03795   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:58:25.03795   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:58:25.03795   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:58:25.03795   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:58:25.03796   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:58:25.03796   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:58:25.03796   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:58:25.03796   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:58:25.03796   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:58:25.03797   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:58:25.03798   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:58:25.03798   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:58:25.77157 {"timestamp":"2020-10-21T14:58:25.771Z","pid":1551,"message":"Puma starting in cluster mode..."}
2020-10-21_14:58:25.77164 {"timestamp":"2020-10-21T14:58:25.771Z","pid":1551,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:58:25.77169 {"timestamp":"2020-10-21T14:58:25.771Z","pid":1551,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:58:25.77175 {"timestamp":"2020-10-21T14:58:25.771Z","pid":1551,"message":"* Environment: production"}
2020-10-21_14:58:25.77180 {"timestamp":"2020-10-21T14:58:25.771Z","pid":1551,"message":"* Process workers: 2"}
2020-10-21_14:58:25.77185 {"timestamp":"2020-10-21T14:58:25.771Z","pid":1551,"message":"* Preloading application"}
2020-10-21_14:58:38.30689 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:58:38.99486 {"timestamp":"2020-10-21T14:58:38.994Z","pid":1551,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:58:38.99512 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:58:38.99534 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:58:38.99535   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:58:38.99535   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:58:38.99536   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:58:38.99536   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:58:38.99536   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:58:38.99537   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:58:38.99537   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:58:38.99537   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:58:38.99537   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:58:38.99537   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:58:38.99538   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:58:38.99538   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:58:38.99539   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:58:38.99539   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:58:38.99539   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:58:38.99540   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:58:38.99540   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:58:38.99540   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:58:38.99540   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:58:38.99541   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:58:38.99541   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:58:38.99541   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:58:38.99542   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:58:38.99542   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:58:38.99543   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:58:38.99543   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:58:38.99543   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:58:38.99543   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:58:38.99543   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:58:38.99544   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:58:38.99544   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:58:38.99545   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:58:38.99545   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:58:38.99545   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:58:38.99546   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:58:38.99546   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:58:38.99546   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:58:38.99547   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:58:38.99547   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:58:38.99548   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:58:38.99548   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:58:38.99548   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:58:38.99548   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:58:38.99549   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:58:38.99549   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:58:38.99549   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:58:38.99549   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:58:38.99550   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:58:38.99550   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:58:38.99550   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:58:38.99551   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:58:38.99551   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:58:38.99551   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:58:38.99552   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:58:38.99552   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:58:38.99552   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:58:38.99552   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:58:38.99553   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:58:38.99553   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:58:38.99553   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:58:38.99553   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:58:38.99553   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:58:38.99554   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:58:38.99555   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:58:38.99555   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:58:38.99555   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:58:38.99555   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:58:38.99555   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:58:38.99556   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:58:38.99556   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:58:38.99556   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:58:38.99557   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:58:38.99558   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:58:38.99558   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:58:38.99558   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:58:39.75612 {"timestamp":"2020-10-21T14:58:39.756Z","pid":1973,"message":"Puma starting in cluster mode..."}
2020-10-21_14:58:39.75638 {"timestamp":"2020-10-21T14:58:39.756Z","pid":1973,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:58:39.75656 {"timestamp":"2020-10-21T14:58:39.756Z","pid":1973,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:58:39.75685 {"timestamp":"2020-10-21T14:58:39.756Z","pid":1973,"message":"* Environment: production"}
2020-10-21_14:58:39.75702 {"timestamp":"2020-10-21T14:58:39.756Z","pid":1973,"message":"* Process workers: 2"}
2020-10-21_14:58:39.75722 {"timestamp":"2020-10-21T14:58:39.757Z","pid":1973,"message":"* Preloading application"}
2020-10-21_14:58:52.42315 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:58:53.09312 {"timestamp":"2020-10-21T14:58:53.092Z","pid":1973,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:58:53.09365 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:58:53.09367 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:58:53.09368   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:58:53.09368   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:58:53.09368   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:58:53.09369   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:58:53.09369   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:58:53.09369   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:58:53.09369   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:58:53.09370   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:58:53.09370   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:58:53.09370   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:58:53.09370   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:58:53.09370   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:58:53.09371   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:58:53.09372   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:58:53.09372   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:58:53.09378   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:58:53.09378   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:58:53.09378   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:58:53.09379   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:58:53.09379   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:58:53.09379   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:58:53.09379   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:58:53.09381   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:58:53.09381   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:58:53.09381   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:58:53.09381   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:58:53.09399   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:58:53.09400   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:58:53.09400   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:58:53.09400   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:58:53.09400   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:58:53.09402   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:58:53.09402   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:58:53.09402   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:58:53.09402   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:58:53.09403   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:58:53.09403   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:58:53.09403   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:58:53.09403   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:58:53.09409   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:58:53.09409   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:58:53.09410   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:58:53.09410   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:58:53.09410   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:58:53.09411   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:58:53.09412   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:58:53.09413   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:58:53.09413   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:58:53.09413   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:58:53.09413   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:58:53.09414   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:58:53.09415   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:58:53.09415   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:58:53.09415   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:58:53.09415   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:58:53.09416   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:58:53.09416   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:58:53.09416   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:58:53.09416   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:58:53.09416   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:58:53.09417   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:58:53.09417   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:58:53.09438   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:58:53.09439   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:58:53.09439   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:58:53.09439   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:58:53.09439   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:58:53.09440   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:58:53.09440   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:58:53.09440   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:58:53.09440   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:58:53.09441   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:58:53.09442   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:58:53.09447   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:58:53.09447   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:58:53.96354 {"timestamp":"2020-10-21T14:58:53.963Z","pid":2394,"message":"Puma starting in cluster mode..."}
2020-10-21_14:58:53.96357 {"timestamp":"2020-10-21T14:58:53.963Z","pid":2394,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:58:53.96358 {"timestamp":"2020-10-21T14:58:53.963Z","pid":2394,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:58:53.96359 {"timestamp":"2020-10-21T14:58:53.963Z","pid":2394,"message":"* Environment: production"}
2020-10-21_14:58:53.96380 {"timestamp":"2020-10-21T14:58:53.963Z","pid":2394,"message":"* Process workers: 2"}
2020-10-21_14:58:53.96384 {"timestamp":"2020-10-21T14:58:53.963Z","pid":2394,"message":"* Preloading application"}
2020-10-21_14:59:07.18939 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:59:07.82909 {"timestamp":"2020-10-21T14:59:07.828Z","pid":2394,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:59:07.82929 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:59:07.82938 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:59:07.82939   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:59:07.82939   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:59:07.82940   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:59:07.82940   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:59:07.82940   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:59:07.82940   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:59:07.82941   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:59:07.82941   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:59:07.82941   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:59:07.82941   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:59:07.82942   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:59:07.82942   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:59:07.82943   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:59:07.82943   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:59:07.82944   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:59:07.82944   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:59:07.82962   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:59:07.82963   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:59:07.82963   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:59:07.82963   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:59:07.82970   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:59:07.82971   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:59:07.82972   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:59:07.82972   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:59:07.82972   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:59:07.82973   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:59:07.82974   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:59:07.82974   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:59:07.82974   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:59:07.82990   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:59:07.82991   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:59:07.82998   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:59:07.82999   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:59:07.83010   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:59:07.83011   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:59:07.83011   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:59:07.83011   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:59:07.83012   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:59:07.83012   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:59:07.83013   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:59:07.83013   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:59:07.83013   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:59:07.83014   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:59:07.83014   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:59:07.83020   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:59:07.83021   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:59:07.83022   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:59:07.83022   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:59:07.83022   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:59:07.83022   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:59:07.83023   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:59:07.83024   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:59:07.83024   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:59:07.83024   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:59:07.83024   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:59:07.83025   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:59:07.83025   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:59:07.83031   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:59:07.83031   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:59:07.83032   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:59:07.83047   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:59:07.83048   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:59:07.83049   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:59:07.83057   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:59:07.83058   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:59:07.83058   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:59:07.83058   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:59:07.83058   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:59:07.83058   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:59:07.83059   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:59:07.83059   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:59:07.83059   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:59:07.83072   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:59:07.83072   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:59:07.83073   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:59:08.63417 {"timestamp":"2020-10-21T14:59:08.634Z","pid":2817,"message":"Puma starting in cluster mode..."}
2020-10-21_14:59:08.63429 {"timestamp":"2020-10-21T14:59:08.634Z","pid":2817,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:59:08.63457 {"timestamp":"2020-10-21T14:59:08.634Z","pid":2817,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:59:08.63475 {"timestamp":"2020-10-21T14:59:08.634Z","pid":2817,"message":"* Environment: production"}
2020-10-21_14:59:08.63490 {"timestamp":"2020-10-21T14:59:08.634Z","pid":2817,"message":"* Process workers: 2"}
2020-10-21_14:59:08.63498 {"timestamp":"2020-10-21T14:59:08.634Z","pid":2817,"message":"* Preloading application"}
2020-10-21_14:59:21.84441 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:59:22.63075 {"timestamp":"2020-10-21T14:59:22.630Z","pid":2817,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:59:22.63105 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:59:22.63107 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:59:22.63108   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:59:22.63108   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:59:22.63108   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:59:22.63109   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:59:22.63110   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:59:22.63110   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:59:22.63110   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:59:22.63110   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:59:22.63111   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:59:22.63111   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:59:22.63111   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:59:22.63111   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:59:22.63131   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:59:22.63131   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:59:22.63132   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:59:22.63132   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:59:22.63132   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:59:22.63133   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:59:22.63133   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:59:22.63133   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:59:22.63133   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:59:22.63135   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:59:22.63151   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:59:22.63152   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:59:22.63152   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:59:22.63152   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:59:22.63152   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:59:22.63153   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:59:22.63153   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:59:22.63153   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:59:22.63168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:59:22.63168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:59:22.63169   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:59:22.63169   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:59:22.63169   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:59:22.63170   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:59:22.63170   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:59:22.63170   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:59:22.63185   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:59:22.63188   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:59:22.63189   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:59:22.63189   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:59:22.63189   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:59:22.63189   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:59:22.63190   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:59:22.63190   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:59:22.63190   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:59:22.63190   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:59:22.63191   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:59:22.63208   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:59:22.63209   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:59:22.63209   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:59:22.63209   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:59:22.63210   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:59:22.63210   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:59:22.63210   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:59:22.63210   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:59:22.63211   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:59:22.63211   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:59:22.63211   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:59:22.63227   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:59:22.63228   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:59:22.63229   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:59:22.63229   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:59:22.63231   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:59:22.63231   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:59:22.63249   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:59:22.63251   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:59:22.63251   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:59:22.63252   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:59:22.63252   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:59:22.63252   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:59:22.63254   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:59:22.63254   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:59:22.63254   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:59:23.40916 {"timestamp":"2020-10-21T14:59:23.408Z","pid":3253,"message":"Puma starting in cluster mode..."}
2020-10-21_14:59:23.40918 {"timestamp":"2020-10-21T14:59:23.409Z","pid":3253,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:59:23.40918 {"timestamp":"2020-10-21T14:59:23.409Z","pid":3253,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:59:23.40918 {"timestamp":"2020-10-21T14:59:23.409Z","pid":3253,"message":"* Environment: production"}
2020-10-21_14:59:23.40919 {"timestamp":"2020-10-21T14:59:23.409Z","pid":3253,"message":"* Process workers: 2"}
2020-10-21_14:59:23.40919 {"timestamp":"2020-10-21T14:59:23.409Z","pid":3253,"message":"* Preloading application"}
2020-10-21_14:59:36.21969 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:59:36.85625 {"timestamp":"2020-10-21T14:59:36.856Z","pid":3253,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:59:36.85652 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:59:36.85667 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:59:36.85668   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:59:36.85668   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:59:36.85669   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:59:36.85669   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:59:36.85669   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:59:36.85669   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:59:36.85669   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:59:36.85670   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:59:36.85670   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:59:36.85670   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:59:36.85670   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:59:36.85671   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:59:36.85672   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:59:36.85672   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:59:36.85672   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:59:36.85672   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:59:36.85673   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:59:36.85674   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:59:36.85674   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:59:36.85674   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:59:36.85674   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:59:36.85675   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:59:36.85676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:59:36.85676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:59:36.85676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:59:36.85676   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:59:36.85677   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:59:36.85677   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:59:36.85677   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:59:36.85677   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:59:36.85678   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:59:36.85679   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:59:36.85679   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:59:36.85679   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:59:36.85679   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:59:36.85680   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:59:36.85680   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:59:36.85680   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:59:36.85680   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:59:36.85681   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:59:36.85682   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:59:36.85682   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:59:36.85682   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:59:36.85682   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:59:36.85682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:59:36.85683   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:59:36.85683   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:59:36.85683   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:59:36.85684   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:59:36.85684   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:59:36.85685   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:59:36.85685   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:59:36.85685   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:59:36.85686   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:59:36.85686   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:59:36.85686   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:59:36.85686   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:59:36.85686   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:59:36.85687   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:59:36.85687   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:59:36.85687   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:59:36.85687   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:59:36.85688   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:59:36.85689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:59:36.85689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:59:36.85689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:59:36.85689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:59:36.85689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:59:36.85690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:59:36.85690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:59:36.85690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:59:36.85690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:59:36.85692   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:59:36.85692   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:59:36.85692   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:59:37.63209 {"timestamp":"2020-10-21T14:59:37.632Z","pid":3666,"message":"Puma starting in cluster mode..."}
2020-10-21_14:59:37.63232 {"timestamp":"2020-10-21T14:59:37.632Z","pid":3666,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:59:37.63253 {"timestamp":"2020-10-21T14:59:37.632Z","pid":3666,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:59:37.63275 {"timestamp":"2020-10-21T14:59:37.632Z","pid":3666,"message":"* Environment: production"}
2020-10-21_14:59:37.63285 {"timestamp":"2020-10-21T14:59:37.632Z","pid":3666,"message":"* Process workers: 2"}
2020-10-21_14:59:37.63302 {"timestamp":"2020-10-21T14:59:37.632Z","pid":3666,"message":"* Preloading application"}
2020-10-21_14:59:50.81386 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_14:59:51.53513 {"timestamp":"2020-10-21T14:59:51.535Z","pid":3666,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_14:59:51.53612 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_14:59:51.53638 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_14:59:51.53640   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_14:59:51.53641   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_14:59:51.53641   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_14:59:51.53641   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_14:59:51.53641   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_14:59:51.53641   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_14:59:51.53642   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_14:59:51.53642   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_14:59:51.53642   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_14:59:51.53642   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_14:59:51.53643   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_14:59:51.53643   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_14:59:51.53663   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_14:59:51.53663   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_14:59:51.53664   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_14:59:51.53664   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_14:59:51.53664   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_14:59:51.53664   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_14:59:51.53675   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_14:59:51.53680   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_14:59:51.53680   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_14:59:51.53680   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_14:59:51.53694   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_14:59:51.53704   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_14:59:51.53708   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_14:59:51.53709   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_14:59:51.53721   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:59:51.53732   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_14:59:51.53744   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_14:59:51.53748   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_14:59:51.53748   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_14:59:51.53761   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_14:59:51.53762   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_14:59:51.53774   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_14:59:51.53775   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_14:59:51.53787   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_14:59:51.53788   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_14:59:51.53800   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_14:59:51.53810   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_14:59:51.53814   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_14:59:51.53823   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_14:59:51.53827   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_14:59:51.53837   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_14:59:51.53841   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_14:59:51.53841   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_14:59:51.53853   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_14:59:51.53853   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_14:59:51.53854   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_14:59:51.53854   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_14:59:51.53854   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_14:59:51.53869   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_14:59:51.53875   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_14:59:51.53877   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_14:59:51.53878   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_14:59:51.53878   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_14:59:51.53878   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_14:59:51.53878   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_14:59:51.53884   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_14:59:51.53884   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_14:59:51.53897   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_14:59:51.53898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_14:59:51.53898   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_14:59:51.53913   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_14:59:51.53915   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_14:59:51.53915   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_14:59:51.53915   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_14:59:51.53915   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_14:59:51.53916   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_14:59:51.53916   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_14:59:51.53916   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_14:59:51.53916   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_14:59:51.53917   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_14:59:51.53918   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_14:59:51.53925   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_14:59:51.53932   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_14:59:52.32599 {"timestamp":"2020-10-21T14:59:52.325Z","pid":4094,"message":"Puma starting in cluster mode..."}
2020-10-21_14:59:52.32632 {"timestamp":"2020-10-21T14:59:52.326Z","pid":4094,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_14:59:52.32653 {"timestamp":"2020-10-21T14:59:52.326Z","pid":4094,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_14:59:52.32665 {"timestamp":"2020-10-21T14:59:52.326Z","pid":4094,"message":"* Environment: production"}
2020-10-21_14:59:52.32677 {"timestamp":"2020-10-21T14:59:52.326Z","pid":4094,"message":"* Process workers: 2"}
2020-10-21_14:59:52.32689 {"timestamp":"2020-10-21T14:59:52.326Z","pid":4094,"message":"* Preloading application"}
2020-10-21_15:00:05.70874 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:00:06.49223 {"timestamp":"2020-10-21T15:00:06.492Z","pid":4094,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:00:06.49251 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:00:06.49270 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:00:06.49271   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:00:06.49271   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:00:06.49271   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:00:06.49271   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:00:06.49272   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:00:06.49272   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:00:06.49272   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:00:06.49273   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:00:06.49273   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:00:06.49274   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:00:06.49274   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:00:06.49274   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:00:06.49275   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:00:06.49276   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:00:06.49276   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:00:06.49276   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:00:06.49276   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:00:06.49276   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:00:06.49277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:00:06.49277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:00:06.49277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:00:06.49277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:00:06.49280   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:00:06.49280   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:00:06.49280   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:00:06.49281   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:00:06.49281   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:00:06.49281   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:00:06.49281   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:00:06.49281   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:00:06.49282   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:00:06.49283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:00:06.49283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:00:06.49283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:00:06.49284   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:00:06.49284   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:00:06.49284   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:00:06.49285   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:00:06.49285   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:00:06.49286   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:00:06.49286   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:00:06.49286   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:00:06.49287   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:00:06.49287   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:00:06.49287   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:00:06.49287   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:00:06.49288   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:00:06.49288   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:00:06.49288   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:00:06.49288   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:00:06.49289   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:00:06.49289   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:00:06.49290   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:00:06.49290   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:00:06.49290   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:00:06.49290   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:00:06.49290   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:00:06.49291   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:00:06.49291   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:00:06.49291   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:00:06.49291   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:00:06.49292   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:00:06.49293   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:00:06.49293   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:00:06.49293   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:00:06.49293   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:00:06.49293   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:00:06.49294   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:00:06.49294   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:00:06.49294   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:00:06.49294   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:00:06.49295   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:00:06.49296   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:00:06.49296   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:00:06.49296   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:00:07.31261 {"timestamp":"2020-10-21T15:00:07.312Z","pid":4529,"message":"Puma starting in cluster mode..."}
2020-10-21_15:00:07.31264 {"timestamp":"2020-10-21T15:00:07.312Z","pid":4529,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:00:07.31265 {"timestamp":"2020-10-21T15:00:07.312Z","pid":4529,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:00:07.31265 {"timestamp":"2020-10-21T15:00:07.312Z","pid":4529,"message":"* Environment: production"}
2020-10-21_15:00:07.31266 {"timestamp":"2020-10-21T15:00:07.312Z","pid":4529,"message":"* Process workers: 2"}
2020-10-21_15:00:07.31267 {"timestamp":"2020-10-21T15:00:07.312Z","pid":4529,"message":"* Preloading application"}
2020-10-21_15:00:21.03491 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:00:22.19239 {"timestamp":"2020-10-21T15:00:22.192Z","pid":4529,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:00:22.19287 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:00:22.19317 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:00:22.19321   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:00:22.19322   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:00:22.19323   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:00:22.19336   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:00:22.19337   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:00:22.19338   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:00:22.19338   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:00:22.19357   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:00:22.19379   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:00:22.19403   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:00:22.19404   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:00:22.19405   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:00:22.19407   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:00:22.19407   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:00:22.19408   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:00:22.19408   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:00:22.19408   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:00:22.19409   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:00:22.19415   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:00:22.19425   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:00:22.19426   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:00:22.19427   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:00:22.19435   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:00:22.19435   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:00:22.19436   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:00:22.19436   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:00:22.19436   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:00:22.19437   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:00:22.19437   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:00:22.19437   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:00:22.19438   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:00:22.19469   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:00:22.19471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:00:22.19472   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:00:22.19472   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:00:22.19473   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:00:22.19473   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:00:22.19474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:00:22.19485   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:00:22.19494   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:00:22.19494   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:00:22.19495   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:00:22.19495   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:00:22.19495   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:00:22.19495   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:00:22.19496   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:00:22.19496   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:00:22.19496   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:00:22.19498   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:00:22.19498   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:00:22.19500   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:00:22.19500   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:00:22.19500   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:00:22.19526   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:00:22.19528   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:00:22.19529   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:00:22.19529   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:00:22.19530   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:00:22.19530   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:00:22.19530   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:00:22.19530   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:00:22.19531   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:00:22.19602   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:00:22.19606   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:00:22.19606   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:00:22.19607   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:00:22.19607   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:00:22.19607   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:00:22.19608   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:00:22.19608   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:00:22.19608   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:00:22.19608   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:00:22.19613   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:00:22.19614   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:00:22.19614   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:00:23.04156 {"timestamp":"2020-10-21T15:00:23.041Z","pid":4973,"message":"Puma starting in cluster mode..."}
2020-10-21_15:00:23.04178 {"timestamp":"2020-10-21T15:00:23.041Z","pid":4973,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:00:23.04194 {"timestamp":"2020-10-21T15:00:23.041Z","pid":4973,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:00:23.04209 {"timestamp":"2020-10-21T15:00:23.042Z","pid":4973,"message":"* Environment: production"}
2020-10-21_15:00:23.04226 {"timestamp":"2020-10-21T15:00:23.042Z","pid":4973,"message":"* Process workers: 2"}
2020-10-21_15:00:23.04241 {"timestamp":"2020-10-21T15:00:23.042Z","pid":4973,"message":"* Preloading application"}
2020-10-21_15:00:48.88341 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:00:49.88557 {"timestamp":"2020-10-21T15:00:49.885Z","pid":4973,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:00:49.88595 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:00:49.88614 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:00:49.88615   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:00:49.88616   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:00:49.88616   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:00:49.88616   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:00:49.88616   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:00:49.88617   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:00:49.88617   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:00:49.88617   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:00:49.88617   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:00:49.88617   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:00:49.88618   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:00:49.88618   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:00:49.88619   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:00:49.88619   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:00:49.88620   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:00:49.88620   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:00:49.88620   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:00:49.88620   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:00:49.88620   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:00:49.88621   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:00:49.88621   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:00:49.88621   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:00:49.88622   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:00:49.88622   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:00:49.88623   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:00:49.88623   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:00:49.88623   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:00:49.88623   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:00:49.88624   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:00:49.88625   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:00:49.88625   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:00:49.88626   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:00:49.88626   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:00:49.88626   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:00:49.88627   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:00:49.88627   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:00:49.88627   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:00:49.88627   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:00:49.88628   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:00:49.88629   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:00:49.88629   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:00:49.88629   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:00:49.88629   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:00:49.88630   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:00:49.88630   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:00:49.88630   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:00:49.88630   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:00:49.88631   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:00:49.88631   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:00:49.88631   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:00:49.88662   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:00:49.88662   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:00:49.88662   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:00:49.88662   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:00:49.88663   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:00:49.88663   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:00:49.88663   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:00:49.88663   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:00:49.88663   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:00:49.88664   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:00:49.88664   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:00:49.88665   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:00:49.88666   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:00:49.88666   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:00:49.88666   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:00:49.88666   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:00:49.88667   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:00:49.88667   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:00:49.88667   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:00:49.88667   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:00:49.88668   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:00:49.88668   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:00:49.88669   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:00:49.88669   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:00:49.88669   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:00:51.21967 {"timestamp":"2020-10-21T15:00:51.219Z","pid":5721,"message":"Puma starting in cluster mode..."}
2020-10-21_15:00:51.22000 {"timestamp":"2020-10-21T15:00:51.219Z","pid":5721,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:00:51.22026 {"timestamp":"2020-10-21T15:00:51.220Z","pid":5721,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:00:51.22049 {"timestamp":"2020-10-21T15:00:51.220Z","pid":5721,"message":"* Environment: production"}
2020-10-21_15:00:51.22072 {"timestamp":"2020-10-21T15:00:51.220Z","pid":5721,"message":"* Process workers: 2"}
2020-10-21_15:00:51.22091 {"timestamp":"2020-10-21T15:00:51.220Z","pid":5721,"message":"* Preloading application"}
2020-10-21_15:01:10.74501 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:01:11.49931 {"timestamp":"2020-10-21T15:01:11.499Z","pid":5721,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:01:11.49973 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:01:11.49992 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:01:11.50005   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:01:11.50012   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:01:11.50013   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:01:11.50014   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:01:11.50014   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:01:11.50015   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:01:11.50034   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:01:11.50035   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:01:11.50035   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:01:11.50037   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:01:11.50037   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:01:11.50038   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:01:11.50051   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:01:11.50052   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:01:11.50053   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:01:11.50053   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:01:11.50053   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:01:11.50054   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:01:11.50054   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:01:11.50054   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:01:11.50055   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:01:11.50055   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:01:11.50081   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:01:11.50084   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:01:11.50085   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:01:11.50085   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:01:11.50085   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:01:11.50086   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:01:11.50086   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:01:11.50086   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:01:11.50087   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:01:11.50088   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:01:11.50089   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:01:11.50089   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:01:11.50089   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:01:11.50090   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:01:11.50090   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:01:11.50090   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:01:11.50090   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:01:11.50092   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:01:11.50093   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:01:11.50093   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:01:11.50093   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:01:11.50094   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:01:11.50094   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:01:11.50094   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:01:11.50095   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:01:11.50095   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:01:11.50096   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:01:11.50096   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:01:11.50114   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:01:11.50115   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:01:11.50116   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:01:11.50116   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:01:11.50116   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:01:11.50117   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:01:11.50117   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:01:11.50117   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:01:11.50118   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:01:11.50118   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:01:11.50118   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:01:11.50119   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:01:11.50120   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:01:11.50121   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:01:11.50121   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:01:11.50121   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:01:11.50122   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:01:11.50122   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:01:11.50122   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:01:11.50123   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:01:11.50123   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:01:11.50124   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:01:11.50125   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:01:11.50126   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:01:11.50126   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:01:12.56917 {"timestamp":"2020-10-21T15:01:12.568Z","pid":6316,"message":"Puma starting in cluster mode..."}
2020-10-21_15:01:12.56941 {"timestamp":"2020-10-21T15:01:12.569Z","pid":6316,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:01:12.56942 {"timestamp":"2020-10-21T15:01:12.569Z","pid":6316,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:01:12.57323 {"timestamp":"2020-10-21T15:01:12.571Z","pid":6316,"message":"* Environment: production"}
2020-10-21_15:01:12.57400 {"timestamp":"2020-10-21T15:01:12.573Z","pid":6316,"message":"* Process workers: 2"}
2020-10-21_15:01:12.57424 {"timestamp":"2020-10-21T15:01:12.574Z","pid":6316,"message":"* Preloading application"}
2020-10-21_15:01:29.24545 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:01:31.48141 {"timestamp":"2020-10-21T15:01:31.477Z","pid":6316,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:01:31.48151 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:01:31.48152 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:01:31.48153   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:01:31.48153   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:01:31.48153   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:01:31.48154   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:01:31.48154   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:01:31.48154   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:01:31.48154   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:01:31.48155   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:01:31.48155   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:01:31.48155   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:01:31.48157   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:01:31.48157   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:01:31.48158   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:01:31.48158   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:01:31.48158   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:01:31.48159   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:01:31.48159   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:01:31.48159   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:01:31.48159   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:01:31.48160   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:01:31.48162   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:01:31.48163   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:01:31.48163   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:01:31.48163   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:01:31.48164   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:01:31.48164   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:01:31.48164   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:01:31.48164   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:01:31.48166   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:01:31.48166   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:01:31.48166   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:01:31.48167   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:01:31.48167   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:01:31.48167   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:01:31.48168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:01:31.48168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:01:31.48168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:01:31.48170   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:01:31.48170   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:01:31.48170   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:01:31.48170   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:01:31.48171   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:01:31.48171   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:01:31.48171   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:01:31.48172   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:01:31.48172   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:01:31.48172   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:01:31.48174   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:01:31.48174   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:01:31.48174   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:01:31.48174   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:01:31.48175   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:01:31.48175   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:01:31.48176   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:01:31.48176   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:01:31.48176   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:01:31.48177   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:01:31.48177   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:01:31.48177   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:01:31.48179   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:01:31.48179   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:01:31.48179   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:01:31.48180   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:01:31.48180   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:01:31.48180   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:01:31.48181   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:01:31.48181   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:01:31.48181   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:01:31.48181   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:01:31.48182   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:01:31.48183   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:01:31.48184   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:01:31.48184   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:01:31.48184   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:01:31.48185   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:01:33.56363 {"timestamp":"2020-10-21T15:01:33.563Z","pid":6889,"message":"Puma starting in cluster mode..."}
2020-10-21_15:01:33.56394 {"timestamp":"2020-10-21T15:01:33.563Z","pid":6889,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:01:33.56408 {"timestamp":"2020-10-21T15:01:33.564Z","pid":6889,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:01:33.56420 {"timestamp":"2020-10-21T15:01:33.564Z","pid":6889,"message":"* Environment: production"}
2020-10-21_15:01:33.56432 {"timestamp":"2020-10-21T15:01:33.564Z","pid":6889,"message":"* Process workers: 2"}
2020-10-21_15:01:33.56445 {"timestamp":"2020-10-21T15:01:33.564Z","pid":6889,"message":"* Preloading application"}
2020-10-21_15:01:59.11973 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:02:00.14428 {"timestamp":"2020-10-21T15:02:00.144Z","pid":6889,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:02:00.14457 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:02:00.14479 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:02:00.14480   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:02:00.14480   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:02:00.14481   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:02:00.14481   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:02:00.14481   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:02:00.14481   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:02:00.14482   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:02:00.14482   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:02:00.14482   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:02:00.14482   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:02:00.14483   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:02:00.14483   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:02:00.14484   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:02:00.14484   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:02:00.14484   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:02:00.14485   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:02:00.14485   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:02:00.14485   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:02:00.14485   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:02:00.14486   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:02:00.14486   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:02:00.14486   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:02:00.14487   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:02:00.14487   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:02:00.14487   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:02:00.14488   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:02:00.14488   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:02:00.14488   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:02:00.14488   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:02:00.14489   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:02:00.14489   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:02:00.14490   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:02:00.14491   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:02:00.14491   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:02:00.14491   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:02:00.14491   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:02:00.14492   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:02:00.14492   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:02:00.14492   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:02:00.14493   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:02:00.14493   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:02:00.14494   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:02:00.14494   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:02:00.14494   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:02:00.14494   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:02:00.14495   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:02:00.14495   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:02:00.14495   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:02:00.14495   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:02:00.14496   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:02:00.14497   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:02:00.14497   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:02:00.14497   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:02:00.14497   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:02:00.14497   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:02:00.14498   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:02:00.14498   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:02:00.14498   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:02:00.14498   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:02:00.14499   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:02:00.14499   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:02:00.14499   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:02:00.14500   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:02:00.14500   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:02:00.14501   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:02:00.14501   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:02:00.14501   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:02:00.14501   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:02:00.14502   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:02:00.14502   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:02:00.14502   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:02:00.14502   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:02:00.14503   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:02:00.14504   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:02:00.14504   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:02:01.10917 {"timestamp":"2020-10-21T15:02:01.109Z","pid":7616,"message":"Puma starting in cluster mode..."}
2020-10-21_15:02:01.10951 {"timestamp":"2020-10-21T15:02:01.109Z","pid":7616,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:02:01.10970 {"timestamp":"2020-10-21T15:02:01.109Z","pid":7616,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:02:01.10990 {"timestamp":"2020-10-21T15:02:01.109Z","pid":7616,"message":"* Environment: production"}
2020-10-21_15:02:01.11011 {"timestamp":"2020-10-21T15:02:01.109Z","pid":7616,"message":"* Process workers: 2"}
2020-10-21_15:02:01.11033 {"timestamp":"2020-10-21T15:02:01.110Z","pid":7616,"message":"* Preloading application"}
2020-10-21_15:02:15.12119 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:02:16.33211 {"timestamp":"2020-10-21T15:02:16.332Z","pid":7616,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:02:16.33232 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:02:16.33264 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:02:16.33265   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:02:16.33265   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:02:16.33266   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:02:16.33266   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:02:16.33266   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:02:16.33266   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:02:16.33266   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:02:16.33267   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:02:16.33267   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:02:16.33267   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:02:16.33267   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:02:16.33268   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:02:16.33275   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:02:16.33276   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:02:16.33276   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:02:16.33276   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:02:16.33276   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:02:16.33276   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:02:16.33277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:02:16.33277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:02:16.33277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:02:16.33277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:02:16.33279   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:02:16.33279   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:02:16.33279   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:02:16.33279   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:02:16.33280   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:02:16.33280   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:02:16.33280   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:02:16.33280   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:02:16.33281   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:02:16.33282   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:02:16.33282   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:02:16.33282   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:02:16.33282   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:02:16.33283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:02:16.33283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:02:16.33283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:02:16.33283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:02:16.33284   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:02:16.33285   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:02:16.33285   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:02:16.33286   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:02:16.33286   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:02:16.33286   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:02:16.33317   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:02:16.33318   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:02:16.33318   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:02:16.33318   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:02:16.33319   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:02:16.33320   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:02:16.33320   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:02:16.33325   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:02:16.33325   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:02:16.33325   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:02:16.33325   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:02:16.33326   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:02:16.33326   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:02:16.33329   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:02:16.33330   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:02:16.33330   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:02:16.33330   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:02:16.33331   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:02:16.33332   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:02:16.33332   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:02:16.33332   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:02:16.33332   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:02:16.33333   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:02:16.33333   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:02:16.33333   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:02:16.33333   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:02:16.33334   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:02:16.33353   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:02:16.33354   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:02:16.33354   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:02:17.15510 {"timestamp":"2020-10-21T15:02:17.155Z","pid":8084,"message":"Puma starting in cluster mode..."}
2020-10-21_15:02:17.15520 {"timestamp":"2020-10-21T15:02:17.155Z","pid":8084,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:02:17.15548 {"timestamp":"2020-10-21T15:02:17.155Z","pid":8084,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:02:17.15565 {"timestamp":"2020-10-21T15:02:17.155Z","pid":8084,"message":"* Environment: production"}
2020-10-21_15:02:17.15582 {"timestamp":"2020-10-21T15:02:17.155Z","pid":8084,"message":"* Process workers: 2"}
2020-10-21_15:02:17.15598 {"timestamp":"2020-10-21T15:02:17.155Z","pid":8084,"message":"* Preloading application"}
2020-10-21_15:02:29.69289 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:02:30.47888 {"timestamp":"2020-10-21T15:02:30.478Z","pid":8084,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:02:30.47892 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:02:30.47894 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:02:30.47894   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:02:30.47894   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:02:30.47894   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:02:30.47895   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:02:30.47895   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:02:30.47895   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:02:30.47895   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:02:30.47895   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:02:30.47896   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:02:30.47896   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:02:30.47896   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:02:30.47896   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:02:30.47897   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:02:30.47898   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:02:30.47898   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:02:30.47898   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:02:30.47898   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:02:30.47899   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:02:30.47903   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:02:30.47904   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:02:30.47904   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:02:30.47904   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:02:30.47906   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:02:30.47907   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:02:30.47907   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:02:30.47907   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:02:30.47907   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:02:30.47908   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:02:30.47908   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:02:30.47908   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:02:30.47908   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:02:30.47909   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:02:30.47910   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:02:30.47910   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:02:30.47910   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:02:30.47910   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:02:30.47910   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:02:30.47911   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:02:30.47911   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:02:30.47912   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:02:30.47912   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:02:30.47912   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:02:30.47913   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:02:30.47913   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:02:30.47913   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:02:30.47913   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:02:30.47914   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:02:30.47914   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:02:30.47914   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:02:30.47914   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:02:30.47915   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:02:30.47915   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:02:30.47916   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:02:30.47916   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:02:30.47916   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:02:30.47916   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:02:30.47917   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:02:30.47917   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:02:30.47917   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:02:30.47917   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:02:30.47918   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:02:30.47918   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:02:30.47919   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:02:30.47919   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:02:30.47919   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:02:30.47919   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:02:30.47920   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:02:30.47920   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:02:30.47920   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:02:30.47920   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:02:30.47921   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:02:30.47921   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:02:30.47922   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:02:30.47922   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:02:30.47922   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:02:31.34422 {"timestamp":"2020-10-21T15:02:31.344Z","pid":8521,"message":"Puma starting in cluster mode..."}
2020-10-21_15:02:31.34439 {"timestamp":"2020-10-21T15:02:31.344Z","pid":8521,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:02:31.34448 {"timestamp":"2020-10-21T15:02:31.344Z","pid":8521,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:02:31.34461 {"timestamp":"2020-10-21T15:02:31.344Z","pid":8521,"message":"* Environment: production"}
2020-10-21_15:02:31.34478 {"timestamp":"2020-10-21T15:02:31.344Z","pid":8521,"message":"* Process workers: 2"}
2020-10-21_15:02:31.34492 {"timestamp":"2020-10-21T15:02:31.344Z","pid":8521,"message":"* Preloading application"}
2020-10-21_15:02:45.86140 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:02:46.64018 {"timestamp":"2020-10-21T15:02:46.640Z","pid":8521,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:02:46.64048 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:02:46.64065 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:02:46.64066   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:02:46.64066   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:02:46.64066   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:02:46.64067   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:02:46.64067   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:02:46.64067   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:02:46.64067   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:02:46.64068   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:02:46.64068   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:02:46.64068   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:02:46.64068   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:02:46.64068   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:02:46.64069   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:02:46.64070   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:02:46.64070   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:02:46.64070   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:02:46.64070   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:02:46.64071   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:02:46.64071   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:02:46.64071   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:02:46.64071   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:02:46.64072   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:02:46.64073   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:02:46.64073   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:02:46.64073   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:02:46.64073   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:02:46.64074   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:02:46.64074   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:02:46.64074   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:02:46.64074   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:02:46.64074   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:02:46.64075   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:02:46.64076   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:02:46.64076   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:02:46.64077   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:02:46.64077   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:02:46.64077   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:02:46.64077   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:02:46.64078   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:02:46.64079   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:02:46.64079   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:02:46.64079   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:02:46.64079   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:02:46.64079   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:02:46.64080   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:02:46.64080   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:02:46.64080   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:02:46.64080   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:02:46.64081   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:02:46.64081   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:02:46.64082   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:02:46.64082   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:02:46.64082   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:02:46.64082   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:02:46.64083   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:02:46.64083   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:02:46.64083   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:02:46.64083   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:02:46.64084   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:02:46.64084   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:02:46.64084   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:02:46.64084   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:02:46.64085   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:02:46.64085   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:02:46.64086   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:02:46.64086   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:02:46.64086   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:02:46.64086   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:02:46.64087   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:02:46.64087   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:02:46.64087   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:02:46.64087   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:02:46.64091   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:02:46.64092   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:02:46.64092   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:02:47.34650 {"timestamp":"2020-10-21T15:02:47.346Z","pid":8992,"message":"Puma starting in cluster mode..."}
2020-10-21_15:02:47.34668 {"timestamp":"2020-10-21T15:02:47.346Z","pid":8992,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:02:47.34678 {"timestamp":"2020-10-21T15:02:47.346Z","pid":8992,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:02:47.34691 {"timestamp":"2020-10-21T15:02:47.346Z","pid":8992,"message":"* Environment: production"}
2020-10-21_15:02:47.34706 {"timestamp":"2020-10-21T15:02:47.346Z","pid":8992,"message":"* Process workers: 2"}
2020-10-21_15:02:47.34724 {"timestamp":"2020-10-21T15:02:47.347Z","pid":8992,"message":"* Preloading application"}
2020-10-21_15:03:05.93929 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:03:07.09004 {"timestamp":"2020-10-21T15:03:07.089Z","pid":8992,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:03:07.09034 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:03:07.09035 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:03:07.09036   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:03:07.09036   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:03:07.09036   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:03:07.09037   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:03:07.09037   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:03:07.09037   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:03:07.09038   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:03:07.09038   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:03:07.09038   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:03:07.09039   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:03:07.09039   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:03:07.09039   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:03:07.09041   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:03:07.09042   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:03:07.09042   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:03:07.09043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:03:07.09043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:03:07.09043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:03:07.09043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:03:07.09044   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:03:07.09044   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:03:07.09045   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:03:07.09046   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:03:07.09046   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:03:07.09047   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:03:07.09047   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:03:07.09047   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:03:07.09048   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:03:07.09048   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:03:07.09048   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:03:07.09050   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:03:07.09050   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:03:07.09050   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:03:07.09051   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:03:07.09051   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:03:07.09051   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:03:07.09052   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:03:07.09052   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:03:07.09053   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:03:07.09054   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:03:07.09097   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:03:07.09098   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:03:07.09099   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:03:07.09099   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:03:07.09100   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:03:07.09100   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:03:07.09100   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:03:07.09101   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:03:07.09101   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:03:07.09103   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:03:07.09103   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:03:07.09103   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:03:07.09104   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:03:07.09104   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:03:07.09104   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:03:07.09105   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:03:07.09105   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:03:07.09105   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:03:07.09106   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:03:07.09106   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:03:07.09106   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:03:07.09108   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:03:07.09108   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:03:07.09108   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:03:07.09108   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:03:07.09109   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:03:07.09109   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:03:07.09110   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:03:07.09110   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:03:07.09110   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:03:07.09111   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:03:07.09111   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:03:07.09112   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:03:07.09113   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:03:07.09113   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:03:07.92619 {"timestamp":"2020-10-21T15:03:07.926Z","pid":9549,"message":"Puma starting in cluster mode..."}
2020-10-21_15:03:07.92628 {"timestamp":"2020-10-21T15:03:07.926Z","pid":9549,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:03:07.92667 {"timestamp":"2020-10-21T15:03:07.926Z","pid":9549,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:03:07.92688 {"timestamp":"2020-10-21T15:03:07.926Z","pid":9549,"message":"* Environment: production"}
2020-10-21_15:03:07.92708 {"timestamp":"2020-10-21T15:03:07.926Z","pid":9549,"message":"* Process workers: 2"}
2020-10-21_15:03:07.92727 {"timestamp":"2020-10-21T15:03:07.927Z","pid":9549,"message":"* Preloading application"}
2020-10-21_15:03:22.00329 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:03:22.70929 {"timestamp":"2020-10-21T15:03:22.708Z","pid":9549,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:03:22.70964 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:03:22.70984 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:03:22.70988   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:03:22.70989   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:03:22.70989   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:03:22.70989   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:03:22.70990   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:03:22.71004   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:03:22.71006   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:03:22.71007   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:03:22.71007   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:03:22.71009   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:03:22.71009   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:03:22.71010   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:03:22.71030   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:03:22.71031   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:03:22.71032   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:03:22.71032   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:03:22.71042   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:03:22.71043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:03:22.71043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:03:22.71044   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:03:22.71044   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:03:22.71044   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:03:22.71045   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:03:22.71046   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:03:22.71063   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:03:22.71064   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:03:22.71064   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:03:22.71064   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:03:22.71064   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:03:22.71079   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:03:22.71081   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:03:22.71082   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:03:22.71082   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:03:22.71083   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:03:22.71083   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:03:22.71083   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:03:22.71083   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:03:22.71084   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:03:22.71084   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:03:22.71102   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:03:22.71103   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:03:22.71103   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:03:22.71103   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:03:22.71113   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:03:22.71117   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:03:22.71118   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:03:22.71118   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:03:22.71118   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:03:22.71129   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:03:22.71129   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:03:22.71131   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:03:22.71131   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:03:22.71131   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:03:22.71131   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:03:22.71131   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:03:22.71132   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:03:22.71147   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:03:22.71147   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:03:22.71148   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:03:22.71148   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:03:22.71148   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:03:22.71159   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:03:22.71164   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:03:22.71175   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:03:22.71175   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:03:22.71175   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:03:22.71176   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:03:22.71176   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:03:22.71176   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:03:22.71176   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:03:22.71177   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:03:22.71177   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:03:22.71193   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:03:22.71194   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:03:22.71194   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:03:23.59696 {"timestamp":"2020-10-21T15:03:23.596Z","pid":10012,"message":"Puma starting in cluster mode..."}
2020-10-21_15:03:23.59722 {"timestamp":"2020-10-21T15:03:23.597Z","pid":10012,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:03:23.59741 {"timestamp":"2020-10-21T15:03:23.597Z","pid":10012,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:03:23.59760 {"timestamp":"2020-10-21T15:03:23.597Z","pid":10012,"message":"* Environment: production"}
2020-10-21_15:03:23.59780 {"timestamp":"2020-10-21T15:03:23.597Z","pid":10012,"message":"* Process workers: 2"}
2020-10-21_15:03:23.59799 {"timestamp":"2020-10-21T15:03:23.597Z","pid":10012,"message":"* Preloading application"}
2020-10-21_15:03:36.55842 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:03:37.25969 {"timestamp":"2020-10-21T15:03:37.259Z","pid":10012,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:03:37.25985 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:03:37.26001 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:03:37.26002   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:03:37.26003   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:03:37.26003   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:03:37.26003   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:03:37.26003   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:03:37.26003   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:03:37.26004   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:03:37.26004   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:03:37.26004   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:03:37.26004   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:03:37.26005   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:03:37.26005   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:03:37.26006   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:03:37.26006   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:03:37.26006   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:03:37.26007   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:03:37.26007   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:03:37.26007   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:03:37.26007   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:03:37.26008   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:03:37.26008   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:03:37.26009   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:03:37.26009   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:03:37.26009   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:03:37.26009   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:03:37.26010   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:03:37.26010   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:03:37.26010   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:03:37.26010   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:03:37.26011   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:03:37.26012   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:03:37.26012   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:03:37.26012   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:03:37.26013   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:03:37.26013   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:03:37.26013   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:03:37.26013   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:03:37.26014   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:03:37.26014   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:03:37.26015   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:03:37.26015   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:03:37.26015   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:03:37.26015   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:03:37.26016   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:03:37.26016   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:03:37.26016   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:03:37.26016   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:03:37.26017   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:03:37.26017   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:03:37.26018   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:03:37.26018   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:03:37.26018   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:03:37.26018   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:03:37.26019   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:03:37.26019   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:03:37.26019   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:03:37.26019   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:03:37.26019   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:03:37.26020   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:03:37.26020   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:03:37.26020   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:03:37.26021   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:03:37.26021   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:03:37.26022   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:03:37.26022   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:03:37.26022   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:03:37.26022   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:03:37.26023   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:03:37.26023   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:03:37.26023   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:03:37.26023   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:03:37.26024   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:03:37.26025   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:03:37.26025   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:03:37.26025   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:03:38.15017 {"timestamp":"2020-10-21T15:03:38.150Z","pid":10458,"message":"Puma starting in cluster mode..."}
2020-10-21_15:03:38.15019 {"timestamp":"2020-10-21T15:03:38.150Z","pid":10458,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:03:38.15021 {"timestamp":"2020-10-21T15:03:38.150Z","pid":10458,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:03:38.15021 {"timestamp":"2020-10-21T15:03:38.150Z","pid":10458,"message":"* Environment: production"}
2020-10-21_15:03:38.15021 {"timestamp":"2020-10-21T15:03:38.150Z","pid":10458,"message":"* Process workers: 2"}
2020-10-21_15:03:38.15021 {"timestamp":"2020-10-21T15:03:38.150Z","pid":10458,"message":"* Preloading application"}
2020-10-21_15:03:51.45537 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:03:51.97368 {"timestamp":"2020-10-21T15:03:51.973Z","pid":10458,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:03:51.97371 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:03:51.97379 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:03:51.97379   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:03:51.97380   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:03:51.97380   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:03:51.97398   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:03:51.97399   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:03:51.97399   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:03:51.97416   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:03:51.97429   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:03:51.97430   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:03:51.97445   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:03:51.97446   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:03:51.97446   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:03:51.97482   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:03:51.97482   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:03:51.97483   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:03:51.97484   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:03:51.97484   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:03:51.97484   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:03:51.97484   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:03:51.97484   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:03:51.97485   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:03:51.97485   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:03:51.97486   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:03:51.97486   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:03:51.97487   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:03:51.97487   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:03:51.97487   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:03:51.97487   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:03:51.97488   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:03:51.97488   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:03:51.97488   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:03:51.97489   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:03:51.97489   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:03:51.97490   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:03:51.97490   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:03:51.97490   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:03:51.97490   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:03:51.97490   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:03:51.97491   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:03:51.97492   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:03:51.97492   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:03:51.97492   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:03:51.97492   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:03:51.97493   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:03:51.97493   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:03:51.97493   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:03:51.97494   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:03:51.97495   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:03:51.97496   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:03:51.97496   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:03:51.97497   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:03:51.97497   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:03:51.97497   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:03:51.97498   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:03:51.97498   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:03:51.97498   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:03:51.97498   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:03:51.97498   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:03:51.97499   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:03:51.97499   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:03:51.97499   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:03:51.97499   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:03:51.97500   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:03:51.97500   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:03:51.97501   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:03:51.97501   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:03:51.97501   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:03:51.97501   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:03:51.97502   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:03:51.97502   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:03:51.97502   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:03:51.97502   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:03:51.97503   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:03:51.97504   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:03:51.97504   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:03:52.63433 {"timestamp":"2020-10-21T15:03:52.634Z","pid":10915,"message":"Puma starting in cluster mode..."}
2020-10-21_15:03:52.63435 {"timestamp":"2020-10-21T15:03:52.634Z","pid":10915,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:03:52.63435 {"timestamp":"2020-10-21T15:03:52.634Z","pid":10915,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:03:52.63435 {"timestamp":"2020-10-21T15:03:52.634Z","pid":10915,"message":"* Environment: production"}
2020-10-21_15:03:52.63436 {"timestamp":"2020-10-21T15:03:52.634Z","pid":10915,"message":"* Process workers: 2"}
2020-10-21_15:03:52.63436 {"timestamp":"2020-10-21T15:03:52.634Z","pid":10915,"message":"* Preloading application"}
2020-10-21_15:04:06.91919 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:04:07.84368 {"timestamp":"2020-10-21T15:04:07.843Z","pid":10915,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:04:07.84460 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:04:07.84469 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:04:07.84470   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:04:07.84470   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:04:07.84471   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:04:07.84471   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:04:07.84471   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:04:07.84471   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:04:07.84472   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:04:07.84472   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:04:07.84472   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:04:07.84473   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:04:07.84473   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:04:07.84473   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:04:07.84474   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:04:07.84474   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:04:07.84475   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:04:07.84475   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:04:07.84475   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:04:07.84476   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:04:07.84476   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:04:07.84476   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:04:07.84476   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:04:07.84477   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:04:07.84478   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:04:07.84478   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:04:07.84478   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:04:07.84480   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:04:07.84480   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:04:07.84480   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:04:07.84481   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:04:07.84481   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:04:07.84481   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:04:07.84515   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:04:07.84516   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:04:07.84516   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:04:07.84516   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:04:07.84516   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:04:07.84517   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:04:07.84517   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:04:07.84517   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:04:07.84518   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:04:07.84518   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:04:07.84519   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:04:07.84519   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:04:07.84519   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:04:07.84519   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:04:07.84520   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:04:07.84520   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:04:07.84520   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:04:07.84520   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:04:07.84521   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:04:07.84522   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:04:07.84522   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:04:07.84522   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:04:07.84522   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:04:07.84522   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:04:07.84523   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:04:07.84523   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:04:07.84524   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:04:07.84524   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:04:07.84524   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:04:07.84524   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:04:07.84525   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:04:07.84526   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:04:07.84526   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:04:07.84526   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:04:07.84526   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:04:07.84527   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:04:07.84527   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:04:07.84527   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:04:07.84527   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:04:07.84527   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:04:07.84528   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:04:07.84529   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:04:07.84529   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:04:07.84529   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:04:08.62438 {"timestamp":"2020-10-21T15:04:08.624Z","pid":11376,"message":"Puma starting in cluster mode..."}
2020-10-21_15:04:08.62440 {"timestamp":"2020-10-21T15:04:08.624Z","pid":11376,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:04:08.62441 {"timestamp":"2020-10-21T15:04:08.624Z","pid":11376,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:04:08.62441 {"timestamp":"2020-10-21T15:04:08.624Z","pid":11376,"message":"* Environment: production"}
2020-10-21_15:04:08.62441 {"timestamp":"2020-10-21T15:04:08.624Z","pid":11376,"message":"* Process workers: 2"}
2020-10-21_15:04:08.62442 {"timestamp":"2020-10-21T15:04:08.624Z","pid":11376,"message":"* Preloading application"}
2020-10-21_15:04:22.10418 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:04:22.90228 {"timestamp":"2020-10-21T15:04:22.902Z","pid":11376,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:04:22.90258 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:04:22.90271 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:04:22.90272   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:04:22.90272   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:04:22.90272   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:04:22.90273   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:04:22.90274   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:04:22.90274   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:04:22.90274   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:04:22.90275   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:04:22.90275   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:04:22.90275   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:04:22.90275   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:04:22.90276   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:04:22.90277   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:04:22.90277   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:04:22.90277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:04:22.90277   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:04:22.90278   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:04:22.90278   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:04:22.90278   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:04:22.90278   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:04:22.90279   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:04:22.90279   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:04:22.90280   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:04:22.90280   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:04:22.90280   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:04:22.90281   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:04:22.90281   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:04:22.90281   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:04:22.90281   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:04:22.90281   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:04:22.90282   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:04:22.90283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:04:22.90283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:04:22.90283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:04:22.90283   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:04:22.90284   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:04:22.90284   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:04:22.90285   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:04:22.90285   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:04:22.90286   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:04:22.90286   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:04:22.90286   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:04:22.90287   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:04:22.90287   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:04:22.90287   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:04:22.90287   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:04:22.90287   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:04:22.90288   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:04:22.90288   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:04:22.90288   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:04:22.90289   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:04:22.90289   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:04:22.90290   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:04:22.90290   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:04:22.90290   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:04:22.90290   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:04:22.90290   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:04:22.90291   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:04:22.90291   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:04:22.90291   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:04:22.90291   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:04:22.90292   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:04:22.90293   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:04:22.90293   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:04:22.90293   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:04:22.90293   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:04:22.90293   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:04:22.90294   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:04:22.90294   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:04:22.90294   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:04:22.90295   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:04:22.90295   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:04:22.90296   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:04:22.90296   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:04:22.90296   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:04:23.69768 {"timestamp":"2020-10-21T15:04:23.697Z","pid":11831,"message":"Puma starting in cluster mode..."}
2020-10-21_15:04:23.69784 {"timestamp":"2020-10-21T15:04:23.697Z","pid":11831,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:04:23.69793 {"timestamp":"2020-10-21T15:04:23.697Z","pid":11831,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:04:23.69806 {"timestamp":"2020-10-21T15:04:23.698Z","pid":11831,"message":"* Environment: production"}
2020-10-21_15:04:23.69819 {"timestamp":"2020-10-21T15:04:23.698Z","pid":11831,"message":"* Process workers: 2"}
2020-10-21_15:04:23.69832 {"timestamp":"2020-10-21T15:04:23.698Z","pid":11831,"message":"* Preloading application"}
2020-10-21_15:04:51.44914 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:04:52.98921 {"timestamp":"2020-10-21T15:04:52.989Z","pid":11831,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:04:52.98998 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:04:52.99021 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:04:52.99021   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:04:52.99022   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:04:52.99022   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:04:52.99022   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:04:52.99023   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:04:52.99023   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:04:52.99023   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:04:52.99023   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:04:52.99024   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:04:52.99024   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:04:52.99024   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:04:52.99024   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:04:52.99026   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:04:52.99026   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:04:52.99026   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:04:52.99026   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:04:52.99027   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:04:52.99028   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:04:52.99028   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:04:52.99028   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:04:52.99028   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:04:52.99029   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:04:52.99030   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:04:52.99030   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:04:52.99030   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:04:52.99030   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:04:52.99031   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:04:52.99031   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:04:52.99031   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:04:52.99031   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:04:52.99032   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:04:52.99033   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:04:52.99033   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:04:52.99033   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:04:52.99033   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:04:52.99034   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:04:52.99034   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:04:52.99034   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:04:52.99034   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:04:52.99035   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:04:52.99036   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:04:52.99036   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:04:52.99036   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:04:52.99036   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:04:52.99037   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:04:52.99037   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:04:52.99038   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:04:52.99038   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:04:52.99038   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:04:52.99038   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:04:52.99039   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:04:52.99040   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:04:52.99040   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:04:52.99040   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:04:52.99040   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:04:52.99040   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:04:52.99041   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:04:52.99041   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:04:52.99041   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:04:52.99041   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:04:52.99042   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:04:52.99042   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:04:52.99043   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:04:52.99043   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:04:52.99043   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:04:52.99044   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:04:52.99044   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:04:52.99044   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:04:52.99044   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:04:52.99045   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:04:52.99045   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:04:52.99045   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:04:52.99046   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:04:52.99046   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:04:52.99047   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:04:54.65103 {"timestamp":"2020-10-21T15:04:54.650Z","pid":12624,"message":"Puma starting in cluster mode..."}
2020-10-21_15:04:54.65126 {"timestamp":"2020-10-21T15:04:54.651Z","pid":12624,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:04:54.65148 {"timestamp":"2020-10-21T15:04:54.651Z","pid":12624,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:04:54.65166 {"timestamp":"2020-10-21T15:04:54.651Z","pid":12624,"message":"* Environment: production"}
2020-10-21_15:04:54.65183 {"timestamp":"2020-10-21T15:04:54.651Z","pid":12624,"message":"* Process workers: 2"}
2020-10-21_15:04:54.65201 {"timestamp":"2020-10-21T15:04:54.651Z","pid":12624,"message":"* Preloading application"}
2020-10-21_15:05:18.09579 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:05:18.96989 {"timestamp":"2020-10-21T15:05:18.969Z","pid":12624,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:05:18.97018 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:05:18.97033 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:05:18.97034   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:05:18.97034   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:05:18.97035   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:05:18.97035   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:05:18.97035   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:05:18.97035   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:05:18.97036   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:05:18.97036   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:05:18.97036   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:05:18.97036   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:05:18.97036   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:05:18.97037   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:05:18.97038   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:05:18.97038   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:05:18.97038   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:05:18.97038   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:05:18.97039   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:05:18.97039   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:05:18.97039   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:05:18.97039   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:05:18.97040   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:05:18.97040   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:05:18.97041   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:05:18.97041   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:05:18.97041   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:05:18.97042   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:05:18.97042   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:05:18.97043   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:05:18.97043   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:05:18.97043   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:05:18.97044   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:05:18.97045   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:05:18.97045   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:05:18.97045   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:05:18.97045   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:05:18.97046   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:05:18.97046   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:05:18.97046   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:05:18.97046   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:05:18.97047   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:05:18.97048   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:05:18.97048   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:05:18.97048   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:05:18.97048   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:05:18.97049   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:05:18.97049   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:05:18.97049   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:05:18.97049   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:05:18.97050   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:05:18.97050   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:05:18.97051   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:05:18.97051   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:05:18.97051   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:05:18.97051   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:05:18.97052   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:05:18.97052   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:05:18.97052   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:05:18.97052   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:05:18.97053   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:05:18.97053   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:05:18.97053   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:05:18.97054   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:05:18.97055   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:05:18.97055   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:05:18.97055   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:05:18.97055   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:05:18.97055   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:05:18.97056   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:05:18.97056   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:05:18.97056   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:05:18.97056   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:05:18.97057   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:05:18.97058   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:05:18.97058   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:05:18.97058   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:05:19.85231 {"timestamp":"2020-10-21T15:05:19.852Z","pid":13340,"message":"Puma starting in cluster mode..."}
2020-10-21_15:05:19.85260 {"timestamp":"2020-10-21T15:05:19.852Z","pid":13340,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:05:19.85288 {"timestamp":"2020-10-21T15:05:19.852Z","pid":13340,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:05:19.85307 {"timestamp":"2020-10-21T15:05:19.852Z","pid":13340,"message":"* Environment: production"}
2020-10-21_15:05:19.85325 {"timestamp":"2020-10-21T15:05:19.853Z","pid":13340,"message":"* Process workers: 2"}
2020-10-21_15:05:19.85346 {"timestamp":"2020-10-21T15:05:19.853Z","pid":13340,"message":"* Preloading application"}
2020-10-21_15:05:34.08104 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:05:34.83318 {"timestamp":"2020-10-21T15:05:34.833Z","pid":13340,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:05:34.83359 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:05:34.83374 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:05:34.83379   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:05:34.83379   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:05:34.83380   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:05:34.83380   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:05:34.83380   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:05:34.83381   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:05:34.83383   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:05:34.83384   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:05:34.83384   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:05:34.83384   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:05:34.83384   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:05:34.83385   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:05:34.83386   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:05:34.83386   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:05:34.83386   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:05:34.83387   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:05:34.83387   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:05:34.83387   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:05:34.83394   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:05:34.83394   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:05:34.83394   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:05:34.83395   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:05:34.83398   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:05:34.83399   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:05:34.83399   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:05:34.83400   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:05:34.83400   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:05:34.83400   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:05:34.83400   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:05:34.83401   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:05:34.83401   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:05:34.83402   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:05:34.83402   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:05:34.83403   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:05:34.83403   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:05:34.83403   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:05:34.83403   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:05:34.83404   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:05:34.83404   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:05:34.83405   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:05:34.83406   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:05:34.83406   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:05:34.83411   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:05:34.83412   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:05:34.83412   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:05:34.83412   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:05:34.83412   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:05:34.83413   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:05:34.83413   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:05:34.83413   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:05:34.83417   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:05:34.83418   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:05:34.83418   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:05:34.83418   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:05:34.83418   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:05:34.83419   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:05:34.83419   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:05:34.83419   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:05:34.83419   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:05:34.83419   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:05:34.83420   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:05:34.83420   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:05:34.83421   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:05:34.83421   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:05:34.83421   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:05:34.83422   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:05:34.83422   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:05:34.83422   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:05:34.83422   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:05:34.83423   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:05:34.83425   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:05:34.83426   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:05:34.83427   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:05:34.83427   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:05:34.83427   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:05:35.76888 {"timestamp":"2020-10-21T15:05:35.768Z","pid":13811,"message":"Puma starting in cluster mode..."}
2020-10-21_15:05:35.76900 {"timestamp":"2020-10-21T15:05:35.768Z","pid":13811,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:05:35.76906 {"timestamp":"2020-10-21T15:05:35.769Z","pid":13811,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:05:35.76912 {"timestamp":"2020-10-21T15:05:35.769Z","pid":13811,"message":"* Environment: production"}
2020-10-21_15:05:35.76929 {"timestamp":"2020-10-21T15:05:35.769Z","pid":13811,"message":"* Process workers: 2"}
2020-10-21_15:05:35.76936 {"timestamp":"2020-10-21T15:05:35.769Z","pid":13811,"message":"* Preloading application"}
2020-10-21_15:05:51.66428 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:05:52.54017 {"timestamp":"2020-10-21T15:05:52.539Z","pid":13811,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:05:52.54067 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:05:52.54099 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:05:52.54100   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:05:52.54100   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:05:52.54101   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:05:52.54101   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:05:52.54101   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:05:52.54102   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:05:52.54102   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:05:52.54103   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:05:52.54103   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:05:52.54104   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:05:52.54104   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:05:52.54104   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:05:52.54116   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:05:52.54122   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:05:52.54123   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:05:52.54123   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:05:52.54124   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:05:52.54124   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:05:52.54125   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:05:52.54125   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:05:52.54126   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:05:52.54126   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:05:52.54128   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:05:52.54128   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:05:52.54128   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:05:52.54129   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:05:52.54129   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:05:52.54129   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:05:52.54130   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:05:52.54130   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:05:52.54130   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:05:52.54132   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:05:52.54132   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:05:52.54132   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:05:52.54133   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:05:52.54133   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:05:52.54134   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:05:52.54134   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:05:52.54134   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:05:52.54143   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:05:52.54144   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:05:52.54150   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:05:52.54150   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:05:52.54151   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:05:52.54151   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:05:52.54151   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:05:52.54152   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:05:52.54152   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:05:52.54153   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:05:52.54153   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:05:52.54155   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:05:52.54155   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:05:52.54155   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:05:52.54156   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:05:52.54156   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:05:52.54156   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:05:52.54157   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:05:52.54157   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:05:52.54157   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:05:52.54158   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:05:52.54158   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:05:52.54158   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:05:52.54160   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:05:52.54160   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:05:52.54160   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:05:52.54161   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:05:52.54161   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:05:52.54161   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:05:52.54162   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:05:52.54162   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:05:52.54162   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:05:52.54163   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:05:52.54164   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:05:52.54164   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:05:52.54165   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:05:53.25325 {"timestamp":"2020-10-21T15:05:53.253Z","pid":14311,"message":"Puma starting in cluster mode..."}
2020-10-21_15:05:53.25339 {"timestamp":"2020-10-21T15:05:53.253Z","pid":14311,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:05:53.25349 {"timestamp":"2020-10-21T15:05:53.253Z","pid":14311,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:05:53.25359 {"timestamp":"2020-10-21T15:05:53.253Z","pid":14311,"message":"* Environment: production"}
2020-10-21_15:05:53.25372 {"timestamp":"2020-10-21T15:05:53.253Z","pid":14311,"message":"* Process workers: 2"}
2020-10-21_15:05:53.25382 {"timestamp":"2020-10-21T15:05:53.253Z","pid":14311,"message":"* Preloading application"}
2020-10-21_15:06:09.16365 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:06:10.23370 {"timestamp":"2020-10-21T15:06:10.233Z","pid":14311,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:06:10.23404 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:06:10.23422 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:06:10.23423   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:06:10.23423   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:06:10.23423   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:06:10.23423   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:06:10.23423   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:06:10.23424   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:06:10.23424   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:06:10.23424   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:06:10.23424   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:06:10.23425   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:06:10.23425   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:06:10.23425   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:06:10.23426   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:06:10.23426   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:06:10.23427   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:06:10.23427   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:06:10.23427   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:06:10.23427   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:06:10.23427   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:06:10.23428   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:06:10.23428   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:06:10.23428   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:06:10.23429   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:06:10.23429   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:06:10.23430   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:06:10.23430   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:06:10.23430   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:06:10.23430   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:06:10.23431   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:06:10.23431   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:06:10.23432   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:06:10.23433   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:06:10.23433   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:06:10.23433   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:06:10.23433   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:06:10.23434   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:06:10.23434   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:06:10.23434   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:06:10.23434   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:06:10.23462   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:06:10.23462   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:06:10.23463   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:06:10.23463   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:06:10.23463   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:06:10.23463   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:06:10.23464   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:06:10.23464   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:06:10.23464   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:06:10.23464   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:06:10.23464   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:06:10.23466   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:06:10.23466   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:06:10.23466   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:06:10.23466   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:06:10.23466   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:06:10.23467   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:06:10.23467   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:06:10.23467   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:06:10.23467   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:06:10.23468   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:06:10.23468   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:06:10.23468   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:06:10.23469   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:06:10.23470   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:06:10.23470   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:06:10.23470   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:06:10.23470   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:06:10.23471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:06:10.23471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:06:10.23471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:06:10.23471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:06:10.23471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:06:10.23473   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:06:10.23473   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:06:10.23473   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:06:11.35917 {"timestamp":"2020-10-21T15:06:11.359Z","pid":14827,"message":"Puma starting in cluster mode..."}
2020-10-21_15:06:11.35920 {"timestamp":"2020-10-21T15:06:11.359Z","pid":14827,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:06:11.35922 {"timestamp":"2020-10-21T15:06:11.359Z","pid":14827,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:06:11.35922 {"timestamp":"2020-10-21T15:06:11.359Z","pid":14827,"message":"* Environment: production"}
2020-10-21_15:06:11.35923 {"timestamp":"2020-10-21T15:06:11.359Z","pid":14827,"message":"* Process workers: 2"}
2020-10-21_15:06:11.35947 {"timestamp":"2020-10-21T15:06:11.359Z","pid":14827,"message":"* Preloading application"}
2020-10-21_15:06:26.47669 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:06:27.09802 {"timestamp":"2020-10-21T15:06:27.097Z","pid":14827,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:06:27.09844 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:06:27.09871 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:06:27.09873   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:06:27.09873   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:06:27.09873   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:06:27.09874   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:06:27.09874   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:06:27.09874   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:06:27.09875   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:06:27.09875   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:06:27.09876   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:06:27.09877   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:06:27.09877   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:06:27.09877   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:06:27.09879   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:06:27.09879   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:06:27.09880   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:06:27.09880   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:06:27.09880   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:06:27.09881   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:06:27.09881   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:06:27.09881   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:06:27.09882   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:06:27.09882   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:06:27.09883   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:06:27.09884   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:06:27.09884   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:06:27.09885   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:06:27.09885   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:06:27.09885   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:06:27.09886   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:06:27.09886   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:06:27.09886   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:06:27.09888   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:06:27.09888   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:06:27.09888   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:06:27.09889   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:06:27.09889   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:06:27.09889   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:06:27.09890   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:06:27.09891   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:06:27.09892   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:06:27.09892   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:06:27.09893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:06:27.09893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:06:27.09893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:06:27.09894   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:06:27.09894   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:06:27.09894   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:06:27.09895   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:06:27.09895   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:06:27.09895   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:06:27.09897   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:06:27.09897   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:06:27.09897   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:06:27.09898   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:06:27.09898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:06:27.09898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:06:27.09899   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:06:27.09899   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:06:27.09899   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:06:27.09900   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:06:27.09900   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:06:27.09900   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:06:27.09902   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:06:27.09902   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:06:27.09902   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:06:27.09903   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:06:27.09903   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:06:27.09903   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:06:27.09904   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:06:27.09904   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:06:27.09904   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:06:27.09905   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:06:27.09907   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:06:27.09907   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:06:27.09907   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:06:28.06550 {"timestamp":"2020-10-21T15:06:28.065Z","pid":15321,"message":"Puma starting in cluster mode..."}
2020-10-21_15:06:28.06575 {"timestamp":"2020-10-21T15:06:28.065Z","pid":15321,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:06:28.06598 {"timestamp":"2020-10-21T15:06:28.065Z","pid":15321,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:06:28.06620 {"timestamp":"2020-10-21T15:06:28.066Z","pid":15321,"message":"* Environment: production"}
2020-10-21_15:06:28.06639 {"timestamp":"2020-10-21T15:06:28.066Z","pid":15321,"message":"* Process workers: 2"}
2020-10-21_15:06:28.06659 {"timestamp":"2020-10-21T15:06:28.066Z","pid":15321,"message":"* Preloading application"}
2020-10-21_15:06:43.83693 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:06:44.97177 {"timestamp":"2020-10-21T15:06:44.971Z","pid":15321,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:06:44.97215 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:06:44.97219 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:06:44.97220   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:06:44.97221   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:06:44.97221   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:06:44.97222   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:06:44.97222   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:06:44.97240   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:06:44.97241   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:06:44.97241   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:06:44.97241   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:06:44.97242   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:06:44.97242   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:06:44.97242   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:06:44.97244   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:06:44.97245   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:06:44.97285   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:06:44.97295   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:06:44.97296   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:06:44.97297   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:06:44.97297   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:06:44.97316   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:06:44.97324   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:06:44.97330   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:06:44.97347   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:06:44.97348   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:06:44.97348   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:06:44.97349   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:06:44.97349   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:06:44.97364   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:06:44.97365   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:06:44.97365   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:06:44.97366   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:06:44.97367   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:06:44.97367   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:06:44.97368   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:06:44.97368   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:06:44.97369   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:06:44.97369   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:06:44.97390   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:06:44.97391   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:06:44.97393   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:06:44.97393   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:06:44.97393   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:06:44.97394   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:06:44.97394   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:06:44.97394   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:06:44.97408   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:06:44.97408   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:06:44.97409   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:06:44.97409   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:06:44.97410   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:06:44.97411   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:06:44.97411   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:06:44.97411   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:06:44.97412   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:06:44.97412   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:06:44.97412   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:06:44.97412   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:06:44.97412   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:06:44.97413   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:06:44.97413   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:06:44.97413   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:06:44.97413   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:06:44.97414   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:06:44.97415   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:06:44.97443   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:06:44.97444   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:06:44.97444   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:06:44.97445   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:06:44.97445   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:06:44.97445   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:06:44.97446   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:06:44.97446   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:06:44.97459   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:06:44.97459   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:06:44.97459   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:06:46.12621 {"timestamp":"2020-10-21T15:06:46.126Z","pid":15854,"message":"Puma starting in cluster mode..."}
2020-10-21_15:06:46.12624 {"timestamp":"2020-10-21T15:06:46.126Z","pid":15854,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:06:46.12626 {"timestamp":"2020-10-21T15:06:46.126Z","pid":15854,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:06:46.12626 {"timestamp":"2020-10-21T15:06:46.126Z","pid":15854,"message":"* Environment: production"}
2020-10-21_15:06:46.12627 {"timestamp":"2020-10-21T15:06:46.126Z","pid":15854,"message":"* Process workers: 2"}
2020-10-21_15:06:46.12653 {"timestamp":"2020-10-21T15:06:46.126Z","pid":15854,"message":"* Preloading application"}
2020-10-21_15:07:01.21472 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:07:02.23385 {"timestamp":"2020-10-21T15:07:02.233Z","pid":15854,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:07:02.23420 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:07:02.23442 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:07:02.23443   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:07:02.23444   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:07:02.23444   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:07:02.23445   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:07:02.23445   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:07:02.23445   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:07:02.23446   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:07:02.23446   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:07:02.23446   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:07:02.23447   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:07:02.23447   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:07:02.23447   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:07:02.23450   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:07:02.23450   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:07:02.23451   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:07:02.23451   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:07:02.23452   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:07:02.23452   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:07:02.23452   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:07:02.23453   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:07:02.23453   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:07:02.23453   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:07:02.23455   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:07:02.23455   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:07:02.23455   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:07:02.23456   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:07:02.23456   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:07:02.23456   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:07:02.23457   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:07:02.23457   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:07:02.23458   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:07:02.23460   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:07:02.23460   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:07:02.23460   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:07:02.23461   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:07:02.23461   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:07:02.23461   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:07:02.23462   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:07:02.23462   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:07:02.23463   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:07:02.23464   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:07:02.23464   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:07:02.23464   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:07:02.23465   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:07:02.23465   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:07:02.23465   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:07:02.23466   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:07:02.23466   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:07:02.23466   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:07:02.23467   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:07:02.23468   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:07:02.23468   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:07:02.23469   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:07:02.23469   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:07:02.23469   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:07:02.23470   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:07:02.23470   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:07:02.23470   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:07:02.23471   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:07:02.23471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:07:02.23471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:07:02.23472   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:07:02.23473   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:07:02.23474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:07:02.23474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:07:02.23474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:07:02.23475   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:07:02.23475   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:07:02.23475   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:07:02.23476   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:07:02.23476   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:07:02.23476   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:07:02.23478   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:07:02.23478   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:07:02.23478   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:07:03.23563 {"timestamp":"2020-10-21T15:07:03.235Z","pid":16348,"message":"Puma starting in cluster mode..."}
2020-10-21_15:07:03.23566 {"timestamp":"2020-10-21T15:07:03.235Z","pid":16348,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:07:03.23567 {"timestamp":"2020-10-21T15:07:03.235Z","pid":16348,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:07:03.23567 {"timestamp":"2020-10-21T15:07:03.235Z","pid":16348,"message":"* Environment: production"}
2020-10-21_15:07:03.23567 {"timestamp":"2020-10-21T15:07:03.235Z","pid":16348,"message":"* Process workers: 2"}
2020-10-21_15:07:03.23568 {"timestamp":"2020-10-21T15:07:03.235Z","pid":16348,"message":"* Preloading application"}
2020-10-21_15:07:20.71121 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:07:21.90438 {"timestamp":"2020-10-21T15:07:21.904Z","pid":16348,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:07:21.90485 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:07:21.90499 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:07:21.90500   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:07:21.90500   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:07:21.90501   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:07:21.90501   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:07:21.90501   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:07:21.90502   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:07:21.90502   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:07:21.90502   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:07:21.90502   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:07:21.90503   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:07:21.90504   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:07:21.90504   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:07:21.90505   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:07:21.90505   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:07:21.90505   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:07:21.90506   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:07:21.90506   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:07:21.90506   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:07:21.90506   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:07:21.90507   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:07:21.90507   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:07:21.90507   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:07:21.90508   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:07:21.90508   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:07:21.90509   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:07:21.90509   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:07:21.90509   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:07:21.90509   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:07:21.90510   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:07:21.90510   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:07:21.90510   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:07:21.90511   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:07:21.90512   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:07:21.90512   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:07:21.90512   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:07:21.90512   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:07:21.90512   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:07:21.90513   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:07:21.90513   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:07:21.90514   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:07:21.90515   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:07:21.90515   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:07:21.90515   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:07:21.90515   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:07:21.90516   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:07:21.90516   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:07:21.90516   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:07:21.90516   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:07:21.90516   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:07:21.90517   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:07:21.90518   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:07:21.90518   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:07:21.90518   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:07:21.90518   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:07:21.90519   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:07:21.90519   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:07:21.90519   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:07:21.90519   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:07:21.90519   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:07:21.90520   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:07:21.90520   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:07:21.90520   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:07:21.90521   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:07:21.90521   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:07:21.90522   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:07:21.90522   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:07:21.90522   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:07:21.90522   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:07:21.90523   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:07:21.90523   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:07:21.90523   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:07:21.90523   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:07:21.90524   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:07:21.90525   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:07:21.90525   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:07:22.83828 {"timestamp":"2020-10-21T15:07:22.838Z","pid":16910,"message":"Puma starting in cluster mode..."}
2020-10-21_15:07:22.83854 {"timestamp":"2020-10-21T15:07:22.838Z","pid":16910,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:07:22.83868 {"timestamp":"2020-10-21T15:07:22.838Z","pid":16910,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:07:22.83882 {"timestamp":"2020-10-21T15:07:22.838Z","pid":16910,"message":"* Environment: production"}
2020-10-21_15:07:22.83897 {"timestamp":"2020-10-21T15:07:22.838Z","pid":16910,"message":"* Process workers: 2"}
2020-10-21_15:07:22.83913 {"timestamp":"2020-10-21T15:07:22.839Z","pid":16910,"message":"* Preloading application"}
2020-10-21_15:07:37.55309 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:07:38.77555 {"timestamp":"2020-10-21T15:07:38.775Z","pid":16910,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:07:38.77608 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:07:38.77639 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:07:38.77641   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:07:38.77641   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:07:38.77642   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:07:38.77642   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:07:38.77642   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:07:38.77643   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:07:38.77643   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:07:38.77643   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:07:38.77644   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:07:38.77644   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:07:38.77644   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:07:38.77645   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:07:38.77647   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:07:38.77647   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:07:38.77647   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:07:38.77648   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:07:38.77648   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:07:38.77648   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:07:38.77648   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:07:38.77649   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:07:38.77649   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:07:38.77650   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:07:38.77651   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:07:38.77651   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:07:38.77652   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:07:38.77652   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:07:38.77652   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:07:38.77652   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:07:38.77652   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:07:38.77653   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:07:38.77653   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:07:38.77654   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:07:38.77654   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:07:38.77654   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:07:38.77655   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:07:38.77655   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:07:38.77655   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:07:38.77655   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:07:38.77656   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:07:38.77657   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:07:38.77657   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:07:38.77657   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:07:38.77657   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:07:38.77658   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:07:38.77658   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:07:38.77658   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:07:38.77659   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:07:38.77659   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:07:38.77659   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:07:38.77659   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:07:38.77661   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:07:38.77661   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:07:38.77662   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:07:38.77687   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:07:38.77688   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:07:38.77688   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:07:38.77689   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:07:38.77690   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:07:38.77690   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:07:38.77690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:07:38.77690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:07:38.77691   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:07:38.77692   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:07:38.77692   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:07:38.77692   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:07:38.77692   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:07:38.77693   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:07:38.77693   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:07:38.77693   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:07:38.77693   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:07:38.77694   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:07:38.77694   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:07:38.77695   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:07:38.77695   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:07:38.77695   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:07:40.03143 {"timestamp":"2020-10-21T15:07:40.031Z","pid":17410,"message":"Puma starting in cluster mode..."}
2020-10-21_15:07:40.03159 {"timestamp":"2020-10-21T15:07:40.031Z","pid":17410,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:07:40.03170 {"timestamp":"2020-10-21T15:07:40.031Z","pid":17410,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:07:40.03184 {"timestamp":"2020-10-21T15:07:40.031Z","pid":17410,"message":"* Environment: production"}
2020-10-21_15:07:40.03197 {"timestamp":"2020-10-21T15:07:40.031Z","pid":17410,"message":"* Process workers: 2"}
2020-10-21_15:07:40.03210 {"timestamp":"2020-10-21T15:07:40.032Z","pid":17410,"message":"* Preloading application"}
2020-10-21_15:07:56.83489 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:07:57.43638 {"timestamp":"2020-10-21T15:07:57.436Z","pid":17410,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:07:57.43662 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:07:57.43678 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:07:57.43679   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:07:57.43679   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:07:57.43679   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:07:57.43679   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:07:57.43680   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:07:57.43680   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:07:57.43680   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:07:57.43680   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:07:57.43680   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:07:57.43681   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:07:57.43681   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:07:57.43681   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:07:57.43682   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:07:57.43682   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:07:57.43683   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:07:57.43683   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:07:57.43683   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:07:57.43683   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:07:57.43684   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:07:57.43684   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:07:57.43684   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:07:57.43684   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:07:57.43685   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:07:57.43686   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:07:57.43686   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:07:57.43686   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:07:57.43686   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:07:57.43686   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:07:57.43687   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:07:57.43687   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:07:57.43687   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:07:57.43689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:07:57.43689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:07:57.43689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:07:57.43689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:07:57.43690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:07:57.43690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:07:57.43690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:07:57.43690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:07:57.43691   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:07:57.43691   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:07:57.43692   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:07:57.43692   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:07:57.43692   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:07:57.43692   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:07:57.43693   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:07:57.43693   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:07:57.43693   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:07:57.43693   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:07:57.43694   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:07:57.43695   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:07:57.43695   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:07:57.43695   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:07:57.43695   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:07:57.43695   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:07:57.43696   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:07:57.43696   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:07:57.43696   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:07:57.43696   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:07:57.43696   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:07:57.43697   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:07:57.43697   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:07:57.43698   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:07:57.43698   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:07:57.43698   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:07:57.43699   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:07:57.43699   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:07:57.43699   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:07:57.43700   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:07:57.43700   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:07:57.43700   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:07:57.43700   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:07:57.43701   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:07:57.43702   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:07:57.43702   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:07:58.13205 {"timestamp":"2020-10-21T15:07:58.131Z","pid":17943,"message":"Puma starting in cluster mode..."}
2020-10-21_15:07:58.13229 {"timestamp":"2020-10-21T15:07:58.132Z","pid":17943,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:07:58.13243 {"timestamp":"2020-10-21T15:07:58.132Z","pid":17943,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:07:58.13261 {"timestamp":"2020-10-21T15:07:58.132Z","pid":17943,"message":"* Environment: production"}
2020-10-21_15:07:58.13279 {"timestamp":"2020-10-21T15:07:58.132Z","pid":17943,"message":"* Process workers: 2"}
2020-10-21_15:07:58.13297 {"timestamp":"2020-10-21T15:07:58.132Z","pid":17943,"message":"* Preloading application"}
2020-10-21_15:08:13.46206 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:08:14.40894 {"timestamp":"2020-10-21T15:08:14.408Z","pid":17943,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:08:14.40927 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:08:14.40944 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:08:14.40945   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:08:14.40945   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:08:14.40945   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:08:14.40946   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:08:14.40946   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:08:14.40946   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:08:14.40946   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:08:14.40946   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:08:14.40947   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:08:14.40947   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:08:14.40947   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:08:14.40947   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:08:14.40949   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:08:14.40949   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:08:14.40950   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:08:14.40950   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:08:14.40950   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:08:14.40950   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:08:14.40951   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:08:14.40951   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:08:14.40951   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:08:14.40951   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:08:14.40952   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:08:14.40953   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:08:14.40953   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:08:14.40953   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:08:14.40953   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:08:14.40954   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:08:14.40954   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:08:14.40954   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:08:14.40954   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:08:14.40955   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:08:14.40956   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:08:14.40956   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:08:14.40956   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:08:14.40956   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:08:14.40957   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:08:14.40957   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:08:14.40957   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:08:14.40958   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:08:14.40958   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:08:14.40959   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:08:14.40959   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:08:14.40960   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:08:14.40960   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:08:14.40960   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:08:14.40960   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:08:14.40961   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:08:14.40961   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:08:14.40961   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:08:14.40962   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:08:14.40962   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:08:14.40962   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:08:14.40963   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:08:14.40963   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:08:14.40963   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:08:14.40963   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:08:14.40964   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:08:14.40964   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:08:14.40964   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:08:14.40964   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:08:14.40964   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:08:14.40965   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:08:14.40966   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:08:14.40966   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:08:14.40966   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:08:14.40966   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:08:14.40967   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:08:14.40967   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:08:14.40967   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:08:14.40967   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:08:14.40968   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:08:14.40969   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:08:14.40969   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:08:14.40969   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:08:15.26908 {"timestamp":"2020-10-21T15:08:15.269Z","pid":18443,"message":"Puma starting in cluster mode..."}
2020-10-21_15:08:15.26941 {"timestamp":"2020-10-21T15:08:15.269Z","pid":18443,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:08:15.26970 {"timestamp":"2020-10-21T15:08:15.269Z","pid":18443,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:08:15.26993 {"timestamp":"2020-10-21T15:08:15.269Z","pid":18443,"message":"* Environment: production"}
2020-10-21_15:08:15.27014 {"timestamp":"2020-10-21T15:08:15.270Z","pid":18443,"message":"* Process workers: 2"}
2020-10-21_15:08:15.27038 {"timestamp":"2020-10-21T15:08:15.270Z","pid":18443,"message":"* Preloading application"}
2020-10-21_15:08:28.99494 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:08:29.92999 {"timestamp":"2020-10-21T15:08:29.929Z","pid":18443,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:08:29.93014 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:08:29.93037 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:08:29.93038   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:08:29.93038   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:08:29.93038   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:08:29.93039   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:08:29.93039   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:08:29.93039   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:08:29.93039   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:08:29.93040   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:08:29.93040   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:08:29.93040   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:08:29.93040   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:08:29.93041   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:08:29.93042   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:08:29.93042   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:08:29.93042   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:08:29.93042   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:08:29.93043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:08:29.93043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:08:29.93043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:08:29.93043   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:08:29.93044   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:08:29.93044   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:08:29.93045   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:08:29.93046   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:08:29.93046   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:08:29.93046   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:08:29.93046   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:08:29.93047   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:08:29.93047   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:08:29.93047   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:08:29.93047   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:08:29.93048   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:08:29.93049   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:08:29.93049   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:08:29.93049   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:08:29.93049   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:08:29.93050   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:08:29.93050   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:08:29.93050   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:08:29.93051   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:08:29.93051   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:08:29.93052   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:08:29.93052   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:08:29.93052   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:08:29.93052   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:08:29.93053   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:08:29.93053   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:08:29.93053   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:08:29.93053   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:08:29.93054   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:08:29.93055   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:08:29.93055   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:08:29.93055   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:08:29.93055   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:08:29.93056   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:08:29.93056   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:08:29.93056   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:08:29.93056   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:08:29.93057   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:08:29.93057   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:08:29.93057   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:08:29.93057   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:08:29.93058   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:08:29.93059   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:08:29.93059   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:08:29.93059   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:08:29.93059   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:08:29.93060   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:08:29.93060   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:08:29.93060   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:08:29.93060   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:08:29.93060   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:08:29.93062   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:08:29.93062   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:08:29.93062   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:08:30.77041 {"timestamp":"2020-10-21T15:08:30.770Z","pid":18914,"message":"Puma starting in cluster mode..."}
2020-10-21_15:08:30.77066 {"timestamp":"2020-10-21T15:08:30.770Z","pid":18914,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:08:30.77080 {"timestamp":"2020-10-21T15:08:30.770Z","pid":18914,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:08:30.77095 {"timestamp":"2020-10-21T15:08:30.770Z","pid":18914,"message":"* Environment: production"}
2020-10-21_15:08:30.77110 {"timestamp":"2020-10-21T15:08:30.771Z","pid":18914,"message":"* Process workers: 2"}
2020-10-21_15:08:30.77125 {"timestamp":"2020-10-21T15:08:30.771Z","pid":18914,"message":"* Preloading application"}
2020-10-21_15:08:44.05489 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:08:45.12284 {"timestamp":"2020-10-21T15:08:45.122Z","pid":18914,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:08:45.12331 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:08:45.12353 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:08:45.12355   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:08:45.12355   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:08:45.12356   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:08:45.12356   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:08:45.12356   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:08:45.12357   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:08:45.12357   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:08:45.12357   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:08:45.12358   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:08:45.12358   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:08:45.12358   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:08:45.12359   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:08:45.12360   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:08:45.12361   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:08:45.12361   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:08:45.12361   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:08:45.12362   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:08:45.12362   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:08:45.12362   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:08:45.12363   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:08:45.12363   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:08:45.12363   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:08:45.12365   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:08:45.12365   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:08:45.12366   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:08:45.12366   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:08:45.12366   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:08:45.12367   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:08:45.12367   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:08:45.12367   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:08:45.12368   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:08:45.12369   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:08:45.12370   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:08:45.12370   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:08:45.12371   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:08:45.12371   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:08:45.12371   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:08:45.12372   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:08:45.12372   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:08:45.12373   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:08:45.12374   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:08:45.12374   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:08:45.12374   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:08:45.12375   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:08:45.12375   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:08:45.12375   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:08:45.12376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:08:45.12376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:08:45.12376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:08:45.12377   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:08:45.12378   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:08:45.12378   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:08:45.12379   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:08:45.12379   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:08:45.12379   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:08:45.12380   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:08:45.12380   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:08:45.12380   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:08:45.12381   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:08:45.12381   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:08:45.12381   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:08:45.12382   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:08:45.12383   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:08:45.12383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:08:45.12384   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:08:45.12384   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:08:45.12385   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:08:45.12385   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:08:45.12385   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:08:45.12386   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:08:45.12386   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:08:45.12386   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:08:45.12388   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:08:45.12388   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:08:45.12389   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:08:46.14250 {"timestamp":"2020-10-21T15:08:46.142Z","pid":19373,"message":"Puma starting in cluster mode..."}
2020-10-21_15:08:46.14260 {"timestamp":"2020-10-21T15:08:46.142Z","pid":19373,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:08:46.14267 {"timestamp":"2020-10-21T15:08:46.142Z","pid":19373,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:08:46.14278 {"timestamp":"2020-10-21T15:08:46.142Z","pid":19373,"message":"* Environment: production"}
2020-10-21_15:08:46.14285 {"timestamp":"2020-10-21T15:08:46.142Z","pid":19373,"message":"* Process workers: 2"}
2020-10-21_15:08:46.14292 {"timestamp":"2020-10-21T15:08:46.142Z","pid":19373,"message":"* Preloading application"}
2020-10-21_15:09:00.38632 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:09:01.02307 {"timestamp":"2020-10-21T15:09:01.022Z","pid":19373,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:09:01.02331 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:09:01.02344 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:09:01.02344   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:09:01.02345   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:09:01.02345   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:09:01.02345   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:09:01.02346   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:09:01.02346   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:09:01.02346   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:09:01.02346   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:09:01.02347   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:09:01.02347   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:09:01.02347   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:09:01.02347   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:09:01.02348   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:09:01.02349   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:09:01.02350   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:09:01.02350   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:09:01.02350   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:09:01.02350   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:09:01.02351   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:09:01.02351   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:09:01.02351   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:09:01.02351   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:09:01.02352   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:09:01.02353   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:09:01.02353   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:09:01.02353   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:09:01.02353   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:09:01.02353   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:09:01.02354   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:09:01.02354   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:09:01.02354   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:09:01.02355   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:09:01.02355   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:09:01.02356   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:09:01.02356   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:09:01.02356   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:09:01.02356   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:09:01.02357   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:09:01.02357   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:09:01.02358   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:09:01.02358   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:09:01.02358   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:09:01.02359   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:09:01.02359   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:09:01.02359   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:09:01.02360   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:09:01.02360   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:09:01.02360   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:09:01.02360   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:09:01.02361   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:09:01.02362   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:09:01.02362   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:09:01.02362   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:09:01.02362   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:09:01.02362   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:09:01.02363   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:09:01.02363   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:09:01.02363   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:09:01.02363   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:09:01.02364   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:09:01.02364   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:09:01.02364   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:09:01.02365   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:09:01.02365   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:09:01.02365   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:09:01.02366   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:09:01.02366   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:09:01.02366   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:09:01.02366   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:09:01.02367   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:09:01.02367   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:09:01.02367   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:09:01.02376   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:09:01.02376   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:09:01.02376   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:09:01.82954 {"timestamp":"2020-10-21T15:09:01.829Z","pid":19843,"message":"Puma starting in cluster mode..."}
2020-10-21_15:09:01.82958 {"timestamp":"2020-10-21T15:09:01.829Z","pid":19843,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:09:01.82959 {"timestamp":"2020-10-21T15:09:01.829Z","pid":19843,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:09:01.82961 {"timestamp":"2020-10-21T15:09:01.829Z","pid":19843,"message":"* Environment: production"}
2020-10-21_15:09:01.82961 {"timestamp":"2020-10-21T15:09:01.829Z","pid":19843,"message":"* Process workers: 2"}
2020-10-21_15:09:01.82987 {"timestamp":"2020-10-21T15:09:01.829Z","pid":19843,"message":"* Preloading application"}
2020-10-21_15:09:16.59652 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:09:17.60331 {"timestamp":"2020-10-21T15:09:17.603Z","pid":19843,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:09:17.60358 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:09:17.60372 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:09:17.60373   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:09:17.60373   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:09:17.60374   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:09:17.60374   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:09:17.60374   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:09:17.60374   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:09:17.60375   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:09:17.60375   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:09:17.60375   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:09:17.60375   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:09:17.60375   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:09:17.60376   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:09:17.60377   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:09:17.60377   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:09:17.60377   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:09:17.60378   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:09:17.60378   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:09:17.60378   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:09:17.60378   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:09:17.60379   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:09:17.60379   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:09:17.60379   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:09:17.60380   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:09:17.60381   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:09:17.60381   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:09:17.60382   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:09:17.60382   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:09:17.60382   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:09:17.60383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:09:17.60383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:09:17.60383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:09:17.60384   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:09:17.60384   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:09:17.60385   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:09:17.60385   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:09:17.60385   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:09:17.60385   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:09:17.60386   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:09:17.60386   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:09:17.60387   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:09:17.60387   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:09:17.60388   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:09:17.60388   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:09:17.60388   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:09:17.60388   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:09:17.60389   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:09:17.60389   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:09:17.60389   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:09:17.60389   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:09:17.60390   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:09:17.60391   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:09:17.60391   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:09:17.60391   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:09:17.60391   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:09:17.60392   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:09:17.60392   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:09:17.60392   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:09:17.60393   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:09:17.60393   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:09:17.60393   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:09:17.60393   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:09:17.60394   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:09:17.60395   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:09:17.60395   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:09:17.60395   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:09:17.60395   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:09:17.60396   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:09:17.60396   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:09:17.60396   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:09:17.60396   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:09:17.60397   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:09:17.60397   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:09:17.60398   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:09:17.60398   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:09:17.60399   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:09:18.38046 {"timestamp":"2020-10-21T15:09:18.380Z","pid":20330,"message":"Puma starting in cluster mode..."}
2020-10-21_15:09:18.38071 {"timestamp":"2020-10-21T15:09:18.380Z","pid":20330,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:09:18.38086 {"timestamp":"2020-10-21T15:09:18.380Z","pid":20330,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:09:18.38099 {"timestamp":"2020-10-21T15:09:18.380Z","pid":20330,"message":"* Environment: production"}
2020-10-21_15:09:18.38111 {"timestamp":"2020-10-21T15:09:18.381Z","pid":20330,"message":"* Process workers: 2"}
2020-10-21_15:09:18.38124 {"timestamp":"2020-10-21T15:09:18.381Z","pid":20330,"message":"* Preloading application"}
2020-10-21_15:09:31.39294 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:09:32.29614 {"timestamp":"2020-10-21T15:09:32.296Z","pid":20330,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:09:32.29647 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:09:32.29671 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:09:32.29672   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:09:32.29673   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:09:32.29674   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:09:32.29674   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:09:32.29674   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:09:32.29674   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:09:32.29675   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:09:32.29675   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:09:32.29675   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:09:32.29675   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:09:32.29676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:09:32.29676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:09:32.29677   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:09:32.29677   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:09:32.29678   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:09:32.29678   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:09:32.29678   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:09:32.29678   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:09:32.29678   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:09:32.29679   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:09:32.29679   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:09:32.29679   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:09:32.29680   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:09:32.29681   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:09:32.29681   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:09:32.29681   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:09:32.29682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:09:32.29682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:09:32.29682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:09:32.29682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:09:32.29683   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:09:32.29684   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:09:32.29684   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:09:32.29685   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:09:32.29685   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:09:32.29686   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:09:32.29686   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:09:32.29686   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:09:32.29687   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:09:32.29688   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:09:32.29688   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:09:32.29689   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:09:32.29689   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:09:32.29689   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:09:32.29689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:09:32.29690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:09:32.29690   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:09:32.29690   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:09:32.29706   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:09:32.29707   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:09:32.29708   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:09:32.29709   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:09:32.29709   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:09:32.29709   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:09:32.29709   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:09:32.29710   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:09:32.29710   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:09:32.29710   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:09:32.29710   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:09:32.29711   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:09:32.29711   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:09:32.29711   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:09:32.29712   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:09:32.29712   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:09:32.29713   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:09:32.29713   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:09:32.29713   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:09:32.29713   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:09:32.29714   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:09:32.29715   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:09:32.29715   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:09:32.29715   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:09:32.29717   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:09:32.29717   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:09:32.29717   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:09:33.10892 {"timestamp":"2020-10-21T15:09:33.108Z","pid":20788,"message":"Puma starting in cluster mode..."}
2020-10-21_15:09:33.10935 {"timestamp":"2020-10-21T15:09:33.109Z","pid":20788,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:09:33.10949 {"timestamp":"2020-10-21T15:09:33.109Z","pid":20788,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:09:33.10968 {"timestamp":"2020-10-21T15:09:33.109Z","pid":20788,"message":"* Environment: production"}
2020-10-21_15:09:33.10986 {"timestamp":"2020-10-21T15:09:33.109Z","pid":20788,"message":"* Process workers: 2"}
2020-10-21_15:09:33.11004 {"timestamp":"2020-10-21T15:09:33.109Z","pid":20788,"message":"* Preloading application"}
2020-10-21_15:09:46.17363 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:09:46.88838 {"timestamp":"2020-10-21T15:09:46.888Z","pid":20788,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:09:46.88878 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:09:46.88900 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:09:46.88901   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:09:46.88902   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:09:46.88902   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:09:46.88902   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:09:46.88903   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:09:46.88903   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:09:46.88903   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:09:46.88903   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:09:46.88904   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:09:46.88904   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:09:46.88911   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:09:46.88912   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:09:46.88917   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:09:46.88918   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:09:46.88918   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:09:46.88919   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:09:46.88919   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:09:46.88920   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:09:46.88920   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:09:46.88920   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:09:46.88920   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:09:46.88921   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:09:46.88934   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:09:46.88935   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:09:46.88935   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:09:46.88935   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:09:46.88936   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:09:46.88936   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:09:46.88936   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:09:46.88936   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:09:46.88937   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:09:46.88938   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:09:46.88938   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:09:46.88938   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:09:46.88939   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:09:46.88946   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:09:46.88947   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:09:46.88947   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:09:46.88947   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:09:46.88953   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:09:46.88953   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:09:46.88954   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:09:46.88954   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:09:46.88954   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:09:46.88954   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:09:46.88955   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:09:46.88955   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:09:46.88956   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:09:46.88956   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:09:46.88956   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:09:46.88973   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:09:46.88973   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:09:46.88973   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:09:46.88974   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:09:46.88974   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:09:46.88974   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:09:46.88974   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:09:46.88974   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:09:46.88979   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:09:46.88980   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:09:46.88980   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:09:46.88980   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:09:46.88998   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:09:46.88998   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:09:46.88998   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:09:46.88999   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:09:46.88999   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:09:46.88999   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:09:46.88999   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:09:46.88999   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:09:46.89000   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:09:46.89003   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:09:46.89017   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:09:46.89018   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:09:46.89018   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:09:47.64791 {"timestamp":"2020-10-21T15:09:47.647Z","pid":21237,"message":"Puma starting in cluster mode..."}
2020-10-21_15:09:47.64795 {"timestamp":"2020-10-21T15:09:47.647Z","pid":21237,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:09:47.64796 {"timestamp":"2020-10-21T15:09:47.647Z","pid":21237,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:09:47.64796 {"timestamp":"2020-10-21T15:09:47.647Z","pid":21237,"message":"* Environment: production"}
2020-10-21_15:09:47.64822 {"timestamp":"2020-10-21T15:09:47.648Z","pid":21237,"message":"* Process workers: 2"}
2020-10-21_15:09:47.64825 {"timestamp":"2020-10-21T15:09:47.648Z","pid":21237,"message":"* Preloading application"}
2020-10-21_15:10:01.21847 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:10:02.01201 {"timestamp":"2020-10-21T15:10:02.011Z","pid":21237,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:10:02.01222 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:10:02.01223 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:10:02.01223   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:10:02.01224   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:10:02.01224   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:10:02.01224   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:10:02.01224   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:10:02.01225   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:10:02.01225   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:10:02.01225   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:10:02.01225   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:10:02.01225   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:10:02.01226   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:10:02.01226   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:10:02.01227   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:10:02.01227   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:10:02.01227   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:10:02.01228   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:10:02.01228   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:10:02.01228   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:10:02.01228   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:10:02.01229   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:10:02.01229   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:10:02.01230   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:10:02.01230   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:10:02.01230   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:10:02.01231   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:10:02.01231   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:10:02.01232   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:10:02.01232   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:10:02.01232   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:10:02.01232   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:10:02.01233   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:10:02.01234   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:10:02.01234   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:10:02.01234   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:10:02.01234   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:10:02.01235   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:10:02.01235   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:10:02.01235   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:10:02.01235   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:10:02.01236   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:10:02.01236   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:10:02.01237   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:10:02.01237   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:10:02.01237   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:10:02.01237   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:10:02.01238   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:10:02.01238   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:10:02.01238   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:10:02.01238   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:10:02.01239   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:10:02.01239   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:10:02.01240   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:10:02.01240   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:10:02.01240   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:10:02.01240   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:10:02.01241   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:10:02.01241   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:10:02.01241   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:10:02.01242   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:10:02.01242   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:10:02.01242   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:10:02.01243   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:10:02.01245   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:10:02.01245   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:10:02.01246   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:10:02.01246   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:10:02.01246   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:10:02.01246   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:10:02.01247   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:10:02.01247   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:10:02.01247   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:10:02.01247   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:10:02.01248   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:10:02.01249   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:10:02.01249   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:10:02.95029 {"timestamp":"2020-10-21T15:10:02.950Z","pid":21675,"message":"Puma starting in cluster mode..."}
2020-10-21_15:10:02.95054 {"timestamp":"2020-10-21T15:10:02.950Z","pid":21675,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:10:02.95069 {"timestamp":"2020-10-21T15:10:02.950Z","pid":21675,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:10:02.95085 {"timestamp":"2020-10-21T15:10:02.950Z","pid":21675,"message":"* Environment: production"}
2020-10-21_15:10:02.95100 {"timestamp":"2020-10-21T15:10:02.950Z","pid":21675,"message":"* Process workers: 2"}
2020-10-21_15:10:02.95115 {"timestamp":"2020-10-21T15:10:02.951Z","pid":21675,"message":"* Preloading application"}
2020-10-21_15:10:19.58452 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:10:20.43831 {"timestamp":"2020-10-21T15:10:20.438Z","pid":21675,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:10:20.43868 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:10:20.43887 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:10:20.43887   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:10:20.43888   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:10:20.43888   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:10:20.43888   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:10:20.43889   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:10:20.43889   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:10:20.43890   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:10:20.43890   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:10:20.43890   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:10:20.43890   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:10:20.43890   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:10:20.43891   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:10:20.43892   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:10:20.43892   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:10:20.43892   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:10:20.43892   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:10:20.43893   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:10:20.43893   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:10:20.43893   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:10:20.43893   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:10:20.43894   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:10:20.43894   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:10:20.43895   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:10:20.43895   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:10:20.43895   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:10:20.43895   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:10:20.43896   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:10:20.43896   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:10:20.43896   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:10:20.43896   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:10:20.43897   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:10:20.43898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:10:20.43898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:10:20.43898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:10:20.43898   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:10:20.43899   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:10:20.43899   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:10:20.43899   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:10:20.43900   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:10:20.43901   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:10:20.43901   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:10:20.43901   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:10:20.43901   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:10:20.43901   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:10:20.43902   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:10:20.43902   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:10:20.43902   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:10:20.43902   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:10:20.43903   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:10:20.43903   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:10:20.43936   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:10:20.43937   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:10:20.43937   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:10:20.43937   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:10:20.43937   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:10:20.43938   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:10:20.43938   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:10:20.43938   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:10:20.43938   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:10:20.43938   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:10:20.43939   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:10:20.43939   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:10:20.43940   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:10:20.43940   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:10:20.43940   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:10:20.43941   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:10:20.43941   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:10:20.43941   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:10:20.43941   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:10:20.43942   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:10:20.43942   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:10:20.43943   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:10:20.43944   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:10:20.43944   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:10:20.43944   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:10:21.18065 {"timestamp":"2020-10-21T15:10:21.180Z","pid":22196,"message":"Puma starting in cluster mode..."}
2020-10-21_15:10:21.18067 {"timestamp":"2020-10-21T15:10:21.180Z","pid":22196,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:10:21.18068 {"timestamp":"2020-10-21T15:10:21.180Z","pid":22196,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:10:21.18068 {"timestamp":"2020-10-21T15:10:21.180Z","pid":22196,"message":"* Environment: production"}
2020-10-21_15:10:21.18068 {"timestamp":"2020-10-21T15:10:21.180Z","pid":22196,"message":"* Process workers: 2"}
2020-10-21_15:10:21.18068 {"timestamp":"2020-10-21T15:10:21.180Z","pid":22196,"message":"* Preloading application"}
2020-10-21_15:10:34.91247 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:10:35.72491 {"timestamp":"2020-10-21T15:10:35.724Z","pid":22196,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:10:35.72538 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:10:35.72560 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:10:35.72561   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:10:35.72562   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:10:35.72562   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:10:35.72562   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:10:35.72562   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:10:35.72562   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:10:35.72563   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:10:35.72563   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:10:35.72563   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:10:35.72563   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:10:35.72564   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:10:35.72564   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:10:35.72565   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:10:35.72565   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:10:35.72566   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:10:35.72566   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:10:35.72566   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:10:35.72567   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:10:35.72567   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:10:35.72568   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:10:35.72568   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:10:35.72568   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:10:35.72569   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:10:35.72569   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:10:35.72570   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:10:35.72570   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:10:35.72570   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:10:35.72570   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:10:35.72571   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:10:35.72571   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:10:35.72571   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:10:35.72572   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:10:35.72572   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:10:35.72573   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:10:35.72573   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:10:35.72573   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:10:35.72573   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:10:35.72574   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:10:35.72574   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:10:35.72575   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:10:35.72575   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:10:35.72576   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:10:35.72576   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:10:35.72576   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:10:35.72576   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:10:35.72577   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:10:35.72577   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:10:35.72577   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:10:35.72578   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:10:35.72578   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:10:35.72579   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:10:35.72579   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:10:35.72579   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:10:35.72579   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:10:35.72580   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:10:35.72581   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:10:35.72581   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:10:35.72582   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:10:35.72582   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:10:35.72582   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:10:35.72582   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:10:35.72583   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:10:35.72584   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:10:35.72584   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:10:35.72584   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:10:35.72584   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:10:35.72584   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:10:35.72585   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:10:35.72585   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:10:35.72585   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:10:35.72585   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:10:35.72586   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:10:35.72587   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:10:35.72587   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:10:35.72587   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:10:36.60874 {"timestamp":"2020-10-21T15:10:36.608Z","pid":22655,"message":"Puma starting in cluster mode..."}
2020-10-21_15:10:36.61017 {"timestamp":"2020-10-21T15:10:36.610Z","pid":22655,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:10:36.61041 {"timestamp":"2020-10-21T15:10:36.610Z","pid":22655,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:10:36.61055 {"timestamp":"2020-10-21T15:10:36.610Z","pid":22655,"message":"* Environment: production"}
2020-10-21_15:10:36.61079 {"timestamp":"2020-10-21T15:10:36.610Z","pid":22655,"message":"* Process workers: 2"}
2020-10-21_15:10:36.61097 {"timestamp":"2020-10-21T15:10:36.610Z","pid":22655,"message":"* Preloading application"}
2020-10-21_15:10:49.91303 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:10:50.66799 {"timestamp":"2020-10-21T15:10:50.667Z","pid":22655,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:10:50.66829 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:10:50.66835 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:10:50.66836   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:10:50.66836   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:10:50.66837   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:10:50.66848   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:10:50.66849   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:10:50.66849   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:10:50.66849   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:10:50.66849   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:10:50.66850   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:10:50.66850   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:10:50.66850   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:10:50.66850   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:10:50.66852   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:10:50.66852   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:10:50.66852   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:10:50.66859   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:10:50.66859   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:10:50.66860   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:10:50.66860   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:10:50.66860   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:10:50.66860   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:10:50.66861   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:10:50.66862   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:10:50.66862   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:10:50.66862   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:10:50.66863   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:10:50.66863   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:10:50.66886   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:10:50.66886   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:10:50.66887   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:10:50.66887   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:10:50.66888   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:10:50.66888   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:10:50.66889   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:10:50.66889   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:10:50.66889   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:10:50.66889   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:10:50.66890   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:10:50.66890   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:10:50.66891   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:10:50.66891   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:10:50.66891   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:10:50.66892   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:10:50.66892   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:10:50.66892   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:10:50.66892   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:10:50.66893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:10:50.66893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:10:50.66893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:10:50.66893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:10:50.66914   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:10:50.66915   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:10:50.66915   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:10:50.66915   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:10:50.66915   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:10:50.66916   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:10:50.66916   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:10:50.66916   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:10:50.66916   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:10:50.66917   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:10:50.66917   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:10:50.66918   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:10:50.66919   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:10:50.66919   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:10:50.66919   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:10:50.66920   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:10:50.66930   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:10:50.66931   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:10:50.66931   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:10:50.66931   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:10:50.66931   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:10:50.66931   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:10:50.66933   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:10:50.66933   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:10:50.66933   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:10:51.54971 {"timestamp":"2020-10-21T15:10:51.549Z","pid":23113,"message":"Puma starting in cluster mode..."}
2020-10-21_15:10:51.54976 {"timestamp":"2020-10-21T15:10:51.549Z","pid":23113,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:10:51.54976 {"timestamp":"2020-10-21T15:10:51.549Z","pid":23113,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:10:51.54977 {"timestamp":"2020-10-21T15:10:51.549Z","pid":23113,"message":"* Environment: production"}
2020-10-21_15:10:51.54978 {"timestamp":"2020-10-21T15:10:51.549Z","pid":23113,"message":"* Process workers: 2"}
2020-10-21_15:10:51.54979 {"timestamp":"2020-10-21T15:10:51.549Z","pid":23113,"message":"* Preloading application"}
2020-10-21_15:11:05.08539 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:11:06.18709 {"timestamp":"2020-10-21T15:11:06.186Z","pid":23113,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:11:06.18726 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:11:06.18733 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:11:06.18734   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:11:06.18734   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:11:06.18734   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:11:06.18735   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:11:06.18735   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:11:06.18735   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:11:06.18735   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:11:06.18736   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:11:06.18736   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:11:06.18737   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:11:06.18737   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:11:06.18737   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:11:06.18738   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:11:06.18739   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:11:06.18739   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:11:06.18739   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:11:06.18739   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:11:06.18739   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:11:06.18740   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:11:06.18740   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:11:06.18740   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:11:06.18740   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:11:06.18741   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:11:06.18742   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:11:06.18742   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:11:06.18742   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:11:06.18742   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:11:06.18743   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:11:06.18743   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:11:06.18743   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:11:06.18743   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:11:06.18744   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:11:06.18745   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:11:06.18745   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:11:06.18745   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:11:06.18745   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:11:06.18745   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:11:06.18746   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:11:06.18746   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:11:06.18747   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:11:06.18747   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:11:06.18748   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:11:06.18748   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:11:06.18748   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:11:06.18748   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:11:06.18749   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:11:06.18749   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:11:06.18749   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:11:06.18749   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:11:06.18749   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:11:06.18750   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:11:06.18751   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:11:06.18751   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:11:06.18751   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:11:06.18751   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:11:06.18751   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:11:06.18752   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:11:06.18752   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:11:06.18752   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:11:06.18752   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:11:06.18753   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:11:06.18753   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:11:06.18754   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:11:06.18754   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:11:06.18754   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:11:06.18754   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:11:06.18755   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:11:06.18755   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:11:06.18755   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:11:06.18755   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:11:06.18756   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:11:06.18756   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:11:06.18757   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:11:06.18757   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:11:06.18758   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:11:07.00183 {"timestamp":"2020-10-21T15:11:07.001Z","pid":23592,"message":"Puma starting in cluster mode..."}
2020-10-21_15:11:07.00196 {"timestamp":"2020-10-21T15:11:07.001Z","pid":23592,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:11:07.00203 {"timestamp":"2020-10-21T15:11:07.002Z","pid":23592,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:11:07.00210 {"timestamp":"2020-10-21T15:11:07.002Z","pid":23592,"message":"* Environment: production"}
2020-10-21_15:11:07.00219 {"timestamp":"2020-10-21T15:11:07.002Z","pid":23592,"message":"* Process workers: 2"}
2020-10-21_15:11:07.00226 {"timestamp":"2020-10-21T15:11:07.002Z","pid":23592,"message":"* Preloading application"}
2020-10-21_15:11:20.94361 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:11:21.61269 {"timestamp":"2020-10-21T15:11:21.612Z","pid":23592,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:11:21.61301 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:11:21.61317 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:11:21.61318   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:11:21.61318   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:11:21.61318   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:11:21.61318   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:11:21.61319   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:11:21.61319   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:11:21.61319   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:11:21.61319   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:11:21.61319   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:11:21.61320   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:11:21.61320   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:11:21.61320   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:11:21.61321   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:11:21.61321   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:11:21.61322   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:11:21.61322   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:11:21.61322   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:11:21.61322   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:11:21.61324   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:11:21.61324   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:11:21.61324   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:11:21.61324   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:11:21.61325   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:11:21.61326   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:11:21.61326   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:11:21.61326   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:11:21.61326   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:11:21.61327   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:11:21.61327   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:11:21.61327   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:11:21.61327   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:11:21.61328   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:11:21.61329   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:11:21.61329   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:11:21.61329   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:11:21.61329   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:11:21.61330   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:11:21.61330   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:11:21.61330   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:11:21.61331   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:11:21.61331   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:11:21.61331   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:11:21.61332   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:11:21.61332   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:11:21.61332   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:11:21.61332   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:11:21.61333   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:11:21.61333   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:11:21.61333   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:11:21.61334   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:11:21.61335   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:11:21.61335   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:11:21.61335   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:11:21.61335   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:11:21.61336   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:11:21.61336   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:11:21.61336   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:11:21.61336   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:11:21.61336   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:11:21.61337   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:11:21.61337   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:11:21.61337   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:11:21.61338   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:11:21.61338   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:11:21.61339   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:11:21.61339   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:11:21.61339   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:11:21.61339   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:11:21.61339   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:11:21.61340   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:11:21.61340   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:11:21.61340   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:11:21.61341   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:11:21.61342   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:11:21.61342   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:11:22.29039 {"timestamp":"2020-10-21T15:11:22.290Z","pid":24041,"message":"Puma starting in cluster mode..."}
2020-10-21_15:11:22.29075 {"timestamp":"2020-10-21T15:11:22.290Z","pid":24041,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:11:22.29089 {"timestamp":"2020-10-21T15:11:22.290Z","pid":24041,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:11:22.29118 {"timestamp":"2020-10-21T15:11:22.291Z","pid":24041,"message":"* Environment: production"}
2020-10-21_15:11:22.29142 {"timestamp":"2020-10-21T15:11:22.291Z","pid":24041,"message":"* Process workers: 2"}
2020-10-21_15:11:22.29165 {"timestamp":"2020-10-21T15:11:22.291Z","pid":24041,"message":"* Preloading application"}
2020-10-21_15:11:36.92243 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:11:37.79689 {"timestamp":"2020-10-21T15:11:37.796Z","pid":24041,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:11:37.79725 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:11:37.79754 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:11:37.79755   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:11:37.79755   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:11:37.79756   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:11:37.79756   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:11:37.79757   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:11:37.79757   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:11:37.79757   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:11:37.79758   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:11:37.79758   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:11:37.79758   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:11:37.79759   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:11:37.79759   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:11:37.79761   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:11:37.79761   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:11:37.79761   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:11:37.79762   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:11:37.79762   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:11:37.79762   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:11:37.79763   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:11:37.79763   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:11:37.79763   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:11:37.79764   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:11:37.79765   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:11:37.79766   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:11:37.79766   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:11:37.79766   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:11:37.79767   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:11:37.79767   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:11:37.79767   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:11:37.79769   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:11:37.79769   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:11:37.79771   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:11:37.79771   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:11:37.79771   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:11:37.79772   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:11:37.79772   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:11:37.79772   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:11:37.79773   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:11:37.79773   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:11:37.79774   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:11:37.79775   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:11:37.79775   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:11:37.79775   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:11:37.79776   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:11:37.79776   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:11:37.79777   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:11:37.79777   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:11:37.79777   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:11:37.79778   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:11:37.79778   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:11:37.79779   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:11:37.79780   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:11:37.79780   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:11:37.79780   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:11:37.79781   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:11:37.79781   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:11:37.79783   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:11:37.79792   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:11:37.79793   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:11:37.79793   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:11:37.79794   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:11:37.79795   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:11:37.79843   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:11:37.79843   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:11:37.79844   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:11:37.79844   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:11:37.79844   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:11:37.79872   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:11:37.79873   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:11:37.79880   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:11:37.79881   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:11:37.79881   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:11:37.79899   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:11:37.79909   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:11:37.79909   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:11:38.62739 {"timestamp":"2020-10-21T15:11:38.627Z","pid":24512,"message":"Puma starting in cluster mode..."}
2020-10-21_15:11:38.62775 {"timestamp":"2020-10-21T15:11:38.627Z","pid":24512,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:11:38.62796 {"timestamp":"2020-10-21T15:11:38.627Z","pid":24512,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:11:38.62820 {"timestamp":"2020-10-21T15:11:38.628Z","pid":24512,"message":"* Environment: production"}
2020-10-21_15:11:38.62840 {"timestamp":"2020-10-21T15:11:38.628Z","pid":24512,"message":"* Process workers: 2"}
2020-10-21_15:11:38.62888 {"timestamp":"2020-10-21T15:11:38.628Z","pid":24512,"message":"* Preloading application"}
2020-10-21_15:11:51.91575 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:11:52.70664 {"timestamp":"2020-10-21T15:11:52.706Z","pid":24512,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:11:52.70710 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:11:52.70726 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:11:52.70727   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:11:52.70727   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:11:52.70727   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:11:52.70728   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:11:52.70728   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:11:52.70728   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:11:52.70729   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:11:52.70729   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:11:52.70729   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:11:52.70730   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:11:52.70730   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:11:52.70731   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:11:52.70732   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:11:52.70732   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:11:52.70732   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:11:52.70732   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:11:52.70733   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:11:52.70733   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:11:52.70733   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:11:52.70733   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:11:52.70734   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:11:52.70734   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:11:52.70735   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:11:52.70735   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:11:52.70736   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:11:52.70736   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:11:52.70736   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:11:52.70736   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:11:52.70737   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:11:52.70737   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:11:52.70737   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:11:52.70738   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:11:52.70738   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:11:52.70739   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:11:52.70739   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:11:52.70739   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:11:52.70739   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:11:52.70740   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:11:52.70740   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:11:52.70741   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:11:52.70741   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:11:52.70742   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:11:52.70742   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:11:52.70742   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:11:52.70742   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:11:52.70743   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:11:52.70743   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:11:52.70743   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:11:52.70743   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:11:52.70744   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:11:52.70745   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:11:52.70745   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:11:52.70745   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:11:52.70745   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:11:52.70745   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:11:52.70746   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:11:52.70746   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:11:52.70746   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:11:52.70746   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:11:52.70747   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:11:52.70747   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:11:52.70747   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:11:52.70748   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:11:52.70748   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:11:52.70749   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:11:52.70749   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:11:52.70749   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:11:52.70749   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:11:52.70750   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:11:52.70750   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:11:52.70750   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:11:52.70750   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:11:52.70752   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:11:52.70752   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:11:52.70752   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:11:53.59515 {"timestamp":"2020-10-21T15:11:53.595Z","pid":24978,"message":"Puma starting in cluster mode..."}
2020-10-21_15:11:53.59518 {"timestamp":"2020-10-21T15:11:53.595Z","pid":24978,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:11:53.59520 {"timestamp":"2020-10-21T15:11:53.595Z","pid":24978,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:11:53.59520 {"timestamp":"2020-10-21T15:11:53.595Z","pid":24978,"message":"* Environment: production"}
2020-10-21_15:11:53.59520 {"timestamp":"2020-10-21T15:11:53.595Z","pid":24978,"message":"* Process workers: 2"}
2020-10-21_15:11:53.59542 {"timestamp":"2020-10-21T15:11:53.595Z","pid":24978,"message":"* Preloading application"}
2020-10-21_15:12:07.40383 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:12:08.49634 {"timestamp":"2020-10-21T15:12:08.496Z","pid":24978,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:12:08.49679 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:12:08.49712 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:12:08.49714   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:12:08.49714   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:12:08.49715   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:12:08.49715   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:12:08.49715   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:12:08.49715   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:12:08.49716   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:12:08.49716   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:12:08.49716   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:12:08.49716   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:12:08.49716   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:12:08.49717   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:12:08.49718   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:12:08.49718   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:12:08.49718   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:12:08.49718   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:12:08.49719   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:12:08.49719   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:12:08.49719   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:12:08.49719   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:12:08.49720   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:12:08.49721   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:12:08.49722   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:12:08.49722   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:12:08.49722   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:12:08.49722   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:12:08.49723   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:12:08.49723   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:12:08.49723   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:12:08.49723   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:12:08.49723   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:12:08.49724   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:12:08.49725   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:12:08.49725   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:12:08.49725   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:12:08.49725   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:12:08.49726   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:12:08.49726   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:12:08.49726   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:12:08.49727   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:12:08.49727   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:12:08.49728   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:12:08.49728   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:12:08.49728   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:12:08.49728   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:12:08.49728   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:12:08.49729   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:12:08.49729   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:12:08.49729   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:12:08.49729   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:12:08.49730   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:12:08.49731   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:12:08.49731   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:12:08.49731   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:12:08.49731   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:12:08.49732   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:12:08.49732   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:12:08.49732   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:12:08.49732   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:12:08.49732   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:12:08.49733   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:12:08.49733   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:12:08.49734   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:12:08.49734   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:12:08.49734   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:12:08.49734   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:12:08.49735   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:12:08.49735   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:12:08.49735   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:12:08.49735   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:12:08.49736   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:12:08.49736   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:12:08.49737   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:12:08.49737   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:12:08.49737   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:12:09.81055 {"timestamp":"2020-10-21T15:12:09.810Z","pid":25443,"message":"Puma starting in cluster mode..."}
2020-10-21_15:12:09.81082 {"timestamp":"2020-10-21T15:12:09.810Z","pid":25443,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:12:09.81102 {"timestamp":"2020-10-21T15:12:09.810Z","pid":25443,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:12:09.81121 {"timestamp":"2020-10-21T15:12:09.811Z","pid":25443,"message":"* Environment: production"}
2020-10-21_15:12:09.81139 {"timestamp":"2020-10-21T15:12:09.811Z","pid":25443,"message":"* Process workers: 2"}
2020-10-21_15:12:09.81162 {"timestamp":"2020-10-21T15:12:09.811Z","pid":25443,"message":"* Preloading application"}
2020-10-21_15:12:23.93386 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:12:24.77096 {"timestamp":"2020-10-21T15:12:24.770Z","pid":25443,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:12:24.77122 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:12:24.77141 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:12:24.77143   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:12:24.77144   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:12:24.77144   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:12:24.77144   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:12:24.77144   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:12:24.77145   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:12:24.77145   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:12:24.77145   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:12:24.77145   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:12:24.77146   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:12:24.77146   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:12:24.77146   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:12:24.77147   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:12:24.77147   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:12:24.77148   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:12:24.77148   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:12:24.77148   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:12:24.77165   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:12:24.77165   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:12:24.77165   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:12:24.77166   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:12:24.77166   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:12:24.77167   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:12:24.77167   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:12:24.77168   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:12:24.77168   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:12:24.77168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:12:24.77168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:12:24.77169   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:12:24.77169   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:12:24.77181   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:12:24.77184   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:12:24.77185   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:12:24.77185   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:12:24.77185   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:12:24.77187   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:12:24.77187   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:12:24.77187   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:12:24.77188   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:12:24.77189   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:12:24.77189   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:12:24.77189   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:12:24.77190   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:12:24.77190   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:12:24.77190   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:12:24.77190   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:12:24.77190   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:12:24.77191   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:12:24.77206   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:12:24.77207   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:12:24.77208   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:12:24.77208   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:12:24.77208   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:12:24.77209   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:12:24.77209   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:12:24.77209   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:12:24.77209   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:12:24.77209   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:12:24.77210   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:12:24.77210   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:12:24.77210   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:12:24.77210   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:12:24.77225   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:12:24.77226   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:12:24.77226   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:12:24.77226   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:12:24.77227   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:12:24.77227   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:12:24.77227   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:12:24.77227   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:12:24.77228   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:12:24.77228   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:12:24.77229   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:12:24.77229   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:12:24.77230   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:12:25.56793 {"timestamp":"2020-10-21T15:12:25.567Z","pid":25927,"message":"Puma starting in cluster mode..."}
2020-10-21_15:12:25.56795 {"timestamp":"2020-10-21T15:12:25.567Z","pid":25927,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:12:25.56797 {"timestamp":"2020-10-21T15:12:25.567Z","pid":25927,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:12:25.56797 {"timestamp":"2020-10-21T15:12:25.567Z","pid":25927,"message":"* Environment: production"}
2020-10-21_15:12:25.56797 {"timestamp":"2020-10-21T15:12:25.567Z","pid":25927,"message":"* Process workers: 2"}
2020-10-21_15:12:25.56798 {"timestamp":"2020-10-21T15:12:25.567Z","pid":25927,"message":"* Preloading application"}
2020-10-21_15:12:40.15113 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:12:40.89353 {"timestamp":"2020-10-21T15:12:40.893Z","pid":25927,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:12:40.89464 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:12:40.89473 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:12:40.89473   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:12:40.89474   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:12:40.89474   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:12:40.89474   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:12:40.89482   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:12:40.89485   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:12:40.89486   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:12:40.89486   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:12:40.89486   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:12:40.89487   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:12:40.89487   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:12:40.89488   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:12:40.89502   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:12:40.89502   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:12:40.89503   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:12:40.89503   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:12:40.89503   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:12:40.89503   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:12:40.89504   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:12:40.89504   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:12:40.89504   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:12:40.89504   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:12:40.89511   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:12:40.89515   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:12:40.89516   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:12:40.89516   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:12:40.89517   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:12:40.89517   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:12:40.89517   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:12:40.89517   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:12:40.89518   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:12:40.89519   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:12:40.89519   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:12:40.89519   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:12:40.89520   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:12:40.89520   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:12:40.89520   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:12:40.89520   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:12:40.89534   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:12:40.89536   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:12:40.89548   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:12:40.89549   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:12:40.89549   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:12:40.89549   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:12:40.89549   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:12:40.89550   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:12:40.89550   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:12:40.89550   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:12:40.89550   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:12:40.89551   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:12:40.89552   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:12:40.89552   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:12:40.89552   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:12:40.89552   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:12:40.89553   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:12:40.89553   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:12:40.89558   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:12:40.89564   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:12:40.89564   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:12:40.89564   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:12:40.89565   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:12:40.89565   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:12:40.89566   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:12:40.89566   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:12:40.89567   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:12:40.89567   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:12:40.89567   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:12:40.89567   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:12:40.89568   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:12:40.89568   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:12:40.89568   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:12:40.89568   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:12:40.89569   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:12:40.89584   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:12:40.89584   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:12:41.56228 {"timestamp":"2020-10-21T15:12:41.562Z","pid":26383,"message":"Puma starting in cluster mode..."}
2020-10-21_15:12:41.56233 {"timestamp":"2020-10-21T15:12:41.562Z","pid":26383,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:12:41.56235 {"timestamp":"2020-10-21T15:12:41.562Z","pid":26383,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:12:41.56235 {"timestamp":"2020-10-21T15:12:41.562Z","pid":26383,"message":"* Environment: production"}
2020-10-21_15:12:41.56235 {"timestamp":"2020-10-21T15:12:41.562Z","pid":26383,"message":"* Process workers: 2"}
2020-10-21_15:12:41.56235 {"timestamp":"2020-10-21T15:12:41.562Z","pid":26383,"message":"* Preloading application"}
2020-10-21_15:12:55.42773 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:12:56.58238 {"timestamp":"2020-10-21T15:12:56.582Z","pid":26383,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:12:56.58272 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:12:56.58292 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:12:56.58293   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:12:56.58294   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:12:56.58294   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:12:56.58294   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:12:56.58294   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:12:56.58294   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:12:56.58295   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:12:56.58295   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:12:56.58295   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:12:56.58295   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:12:56.58296   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:12:56.58296   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:12:56.58297   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:12:56.58297   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:12:56.58297   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:12:56.58298   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:12:56.58298   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:12:56.58298   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:12:56.58298   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:12:56.58299   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:12:56.58299   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:12:56.58299   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:12:56.58301   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:12:56.58301   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:12:56.58301   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:12:56.58301   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:12:56.58302   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:12:56.58302   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:12:56.58302   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:12:56.58302   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:12:56.58303   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:12:56.58304   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:12:56.58304   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:12:56.58304   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:12:56.58304   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:12:56.58305   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:12:56.58305   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:12:56.58305   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:12:56.58305   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:12:56.58306   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:12:56.58307   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:12:56.58307   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:12:56.58307   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:12:56.58307   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:12:56.58307   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:12:56.58308   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:12:56.58308   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:12:56.58308   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:12:56.58308   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:12:56.58309   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:12:56.58310   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:12:56.58310   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:12:56.58310   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:12:56.58310   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:12:56.58311   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:12:56.58311   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:12:56.58311   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:12:56.58311   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:12:56.58312   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:12:56.58312   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:12:56.58312   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:12:56.58312   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:12:56.58313   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:12:56.58313   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:12:56.58314   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:12:56.58314   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:12:56.58314   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:12:56.58314   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:12:56.58315   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:12:56.58315   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:12:56.58315   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:12:56.58315   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:12:56.58316   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:12:56.58317   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:12:56.58317   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:12:57.40022 {"timestamp":"2020-10-21T15:12:57.400Z","pid":26848,"message":"Puma starting in cluster mode..."}
2020-10-21_15:12:57.40054 {"timestamp":"2020-10-21T15:12:57.400Z","pid":26848,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:12:57.40081 {"timestamp":"2020-10-21T15:12:57.400Z","pid":26848,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:12:57.40110 {"timestamp":"2020-10-21T15:12:57.400Z","pid":26848,"message":"* Environment: production"}
2020-10-21_15:12:57.40135 {"timestamp":"2020-10-21T15:12:57.401Z","pid":26848,"message":"* Process workers: 2"}
2020-10-21_15:12:57.40161 {"timestamp":"2020-10-21T15:12:57.401Z","pid":26848,"message":"* Preloading application"}
2020-10-21_15:13:10.95331 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-21_15:13:11.69831 {"timestamp":"2020-10-21T15:13:11.698Z","pid":26848,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-21_15:13:11.69861 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-21_15:13:11.69878 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-21_15:13:11.69879   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-21_15:13:11.69879   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-21_15:13:11.69880   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-21_15:13:11.69880   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-21_15:13:11.69880   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-21_15:13:11.69880   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-21_15:13:11.69881   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-21_15:13:11.69881   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-21_15:13:11.69881   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-21_15:13:11.69881   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-21_15:13:11.69882   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-21_15:13:11.69882   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-21_15:13:11.69883   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-21_15:13:11.69883   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-21_15:13:11.69883   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-21_15:13:11.69884   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-21_15:13:11.69884   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-21_15:13:11.69884   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-21_15:13:11.69884   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-21_15:13:11.69885   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-21_15:13:11.69885   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-21_15:13:11.69885   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-21_15:13:11.69886   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-21_15:13:11.69886   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-21_15:13:11.69887   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-21_15:13:11.69887   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-21_15:13:11.69887   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:13:11.69887   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-21_15:13:11.69888   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-21_15:13:11.69888   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-21_15:13:11.69888   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-21_15:13:11.69890   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-21_15:13:11.69890   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-21_15:13:11.69890   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-21_15:13:11.69891   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-21_15:13:11.69891   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-21_15:13:11.69891   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-21_15:13:11.69891   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-21_15:13:11.69892   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-21_15:13:11.69893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-21_15:13:11.69893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-21_15:13:11.69893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-21_15:13:11.69893   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-21_15:13:11.69894   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-21_15:13:11.69894   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-21_15:13:11.69894   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-21_15:13:11.69894   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-21_15:13:11.69895   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-21_15:13:11.69895   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-21_15:13:11.69895   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-21_15:13:11.69896   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-21_15:13:11.69896   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-21_15:13:11.69898   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-21_15:13:11.69899   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-21_15:13:11.69899   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-21_15:13:11.69899   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-21_15:13:11.69899   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-21_15:13:11.69900   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-21_15:13:11.69900   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-21_15:13:11.69900   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-21_15:13:11.69900   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-21_15:13:11.69901   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-21_15:13:11.69902   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-21_15:13:11.69902   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-21_15:13:11.69902   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-21_15:13:11.69903   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-21_15:13:11.69903   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-21_15:13:11.69903   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-21_15:13:11.69904   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-21_15:13:11.69904   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-21_15:13:11.69904   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-21_15:13:11.69904   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-21_15:13:11.69905   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-21_15:13:11.69906   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-21_15:13:11.69906   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-21_15:13:12.50934 {"timestamp":"2020-10-21T15:13:12.509Z","pid":27298,"message":"Puma starting in cluster mode..."}
2020-10-21_15:13:12.50961 {"timestamp":"2020-10-21T15:13:12.509Z","pid":27298,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-21_15:13:12.50979 {"timestamp":"2020-10-21T15:13:12.509Z","pid":27298,"message":"* Min threads: 4, max threads: 4"}
2020-10-21_15:13:12.51001 {"timestamp":"2020-10-21T15:13:12.509Z","pid":27298,"message":"* Environment: production"}
2020-10-21_15:13:12.51018 {"timestamp":"2020-10-21T15:13:12.510Z","pid":27298,"message":"* Process workers: 2"}
2020-10-21_15:13:12.51038 {"timestamp":"2020-10-21T15:13:12.510Z","pid":27298,"message":"* Preloading application"}
