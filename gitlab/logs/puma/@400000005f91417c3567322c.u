2020-10-22_08:20:18.52941 {"timestamp":"2020-10-22T08:20:16.885Z","pid":414,"message":"Puma starting in cluster mode..."}
2020-10-22_08:20:18.52945 {"timestamp":"2020-10-22T08:20:16.885Z","pid":414,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-22_08:20:18.52945 {"timestamp":"2020-10-22T08:20:16.885Z","pid":414,"message":"* Min threads: 4, max threads: 4"}
2020-10-22_08:20:18.52945 {"timestamp":"2020-10-22T08:20:16.885Z","pid":414,"message":"* Environment: production"}
2020-10-22_08:20:18.52946 {"timestamp":"2020-10-22T08:20:16.885Z","pid":414,"message":"* Process workers: 2"}
2020-10-22_08:20:18.52946 {"timestamp":"2020-10-22T08:20:16.885Z","pid":414,"message":"* Preloading application"}
2020-10-22_08:20:28.27742 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-22_08:20:29.17350 {"timestamp":"2020-10-22T08:20:29.173Z","pid":414,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-22_08:20:29.17361 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-22_08:20:29.17363 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-22_08:20:29.17363   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-22_08:20:29.17363   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-22_08:20:29.17364   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-22_08:20:29.17364   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-22_08:20:29.17364   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-22_08:20:29.17364   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-22_08:20:29.17364   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-22_08:20:29.17365   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-22_08:20:29.17365   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-22_08:20:29.17365   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-22_08:20:29.17365   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-22_08:20:29.17365   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-22_08:20:29.17366   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-22_08:20:29.17367   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-22_08:20:29.17367   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-22_08:20:29.17367   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-22_08:20:29.17367   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-22_08:20:29.17367   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-22_08:20:29.17368   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-22_08:20:29.17368   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-22_08:20:29.17368   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-22_08:20:29.17368   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-22_08:20:29.17370   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-22_08:20:29.17371   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-22_08:20:29.17371   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-22_08:20:29.17371   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-22_08:20:29.17371   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:20:29.17371   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-22_08:20:29.17372   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-22_08:20:29.17372   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:20:29.17372   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-22_08:20:29.17373   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-22_08:20:29.17373   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-22_08:20:29.17373   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-22_08:20:29.17374   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-22_08:20:29.17374   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-22_08:20:29.17374   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-22_08:20:29.17374   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-22_08:20:29.17375   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-22_08:20:29.17376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-22_08:20:29.17376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-22_08:20:29.17376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-22_08:20:29.17376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-22_08:20:29.17376   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-22_08:20:29.17377   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-22_08:20:29.17377   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-22_08:20:29.17377   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-22_08:20:29.17377   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-22_08:20:29.17377   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-22_08:20:29.17378   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-22_08:20:29.17379   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-22_08:20:29.17379   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-22_08:20:29.17379   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-22_08:20:29.17379   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-22_08:20:29.17380   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-22_08:20:29.17380   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-22_08:20:29.17380   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-22_08:20:29.17380   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-22_08:20:29.17381   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-22_08:20:29.17381   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-22_08:20:29.17381   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-22_08:20:29.17381   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-22_08:20:29.17382   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-22_08:20:29.17382   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-22_08:20:29.17383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-22_08:20:29.17383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-22_08:20:29.17383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-22_08:20:29.17383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-22_08:20:29.17383   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-22_08:20:29.17384   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-22_08:20:29.17384   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-22_08:20:29.17384   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-22_08:20:29.17385   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-22_08:20:29.17385   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-22_08:20:29.17386   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-22_08:20:29.88591 {"timestamp":"2020-10-22T08:20:29.885Z","pid":583,"message":"Puma starting in cluster mode..."}
2020-10-22_08:20:29.88594 {"timestamp":"2020-10-22T08:20:29.885Z","pid":583,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-22_08:20:29.88594 {"timestamp":"2020-10-22T08:20:29.885Z","pid":583,"message":"* Min threads: 4, max threads: 4"}
2020-10-22_08:20:29.88595 {"timestamp":"2020-10-22T08:20:29.885Z","pid":583,"message":"* Environment: production"}
2020-10-22_08:20:29.88596 {"timestamp":"2020-10-22T08:20:29.885Z","pid":583,"message":"* Process workers: 2"}
2020-10-22_08:20:29.88596 {"timestamp":"2020-10-22T08:20:29.885Z","pid":583,"message":"* Preloading application"}
2020-10-22_08:20:43.47035 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-22_08:20:44.45664 {"timestamp":"2020-10-22T08:20:44.456Z","pid":583,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-22_08:20:44.45679 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-22_08:20:44.45686 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-22_08:20:44.45687   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-22_08:20:44.45687   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-22_08:20:44.45687   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-22_08:20:44.45687   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-22_08:20:44.45688   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-22_08:20:44.45688   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-22_08:20:44.45688   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-22_08:20:44.45688   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-22_08:20:44.45688   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-22_08:20:44.45689   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-22_08:20:44.45689   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-22_08:20:44.45689   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-22_08:20:44.45690   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-22_08:20:44.45690   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-22_08:20:44.45691   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-22_08:20:44.45691   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-22_08:20:44.45691   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-22_08:20:44.45691   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-22_08:20:44.45691   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-22_08:20:44.45692   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-22_08:20:44.45692   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-22_08:20:44.45692   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-22_08:20:44.45693   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-22_08:20:44.45693   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-22_08:20:44.45693   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-22_08:20:44.45694   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-22_08:20:44.45694   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:20:44.45694   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-22_08:20:44.45694   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-22_08:20:44.45695   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:20:44.45695   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-22_08:20:44.45696   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-22_08:20:44.45696   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-22_08:20:44.45697   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-22_08:20:44.45697   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-22_08:20:44.45697   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-22_08:20:44.45697   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-22_08:20:44.45698   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-22_08:20:44.45698   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-22_08:20:44.45699   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-22_08:20:44.45699   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-22_08:20:44.45699   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-22_08:20:44.45699   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-22_08:20:44.45700   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-22_08:20:44.45700   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-22_08:20:44.45700   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-22_08:20:44.45700   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-22_08:20:44.45700   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-22_08:20:44.45701   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-22_08:20:44.45701   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-22_08:20:44.45702   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-22_08:20:44.45702   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-22_08:20:44.45702   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-22_08:20:44.45702   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-22_08:20:44.45703   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-22_08:20:44.45703   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-22_08:20:44.45703   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-22_08:20:44.45703   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-22_08:20:44.45703   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-22_08:20:44.45704   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-22_08:20:44.45704   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-22_08:20:44.45704   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-22_08:20:44.45705   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-22_08:20:44.45705   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-22_08:20:44.45705   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-22_08:20:44.45706   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-22_08:20:44.45706   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-22_08:20:44.45706   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-22_08:20:44.45707   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-22_08:20:44.45707   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-22_08:20:44.45707   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-22_08:20:44.45707   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-22_08:20:44.45708   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-22_08:20:44.45709   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-22_08:20:44.45709   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-22_08:20:45.69312 {"timestamp":"2020-10-22T08:20:45.693Z","pid":795,"message":"Puma starting in cluster mode..."}
2020-10-22_08:20:45.69321 {"timestamp":"2020-10-22T08:20:45.693Z","pid":795,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-22_08:20:45.69328 {"timestamp":"2020-10-22T08:20:45.693Z","pid":795,"message":"* Min threads: 4, max threads: 4"}
2020-10-22_08:20:45.69335 {"timestamp":"2020-10-22T08:20:45.693Z","pid":795,"message":"* Environment: production"}
2020-10-22_08:20:45.69342 {"timestamp":"2020-10-22T08:20:45.693Z","pid":795,"message":"* Process workers: 2"}
2020-10-22_08:20:45.69349 {"timestamp":"2020-10-22T08:20:45.693Z","pid":795,"message":"* Preloading application"}
2020-10-22_08:20:59.07194 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-22_08:20:59.94659 {"timestamp":"2020-10-22T08:20:59.946Z","pid":795,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-22_08:20:59.94668 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-22_08:20:59.94670 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-22_08:20:59.94670   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-22_08:20:59.94670   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-22_08:20:59.94671   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-22_08:20:59.94671   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-22_08:20:59.94671   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-22_08:20:59.94671   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-22_08:20:59.94672   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-22_08:20:59.94672   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-22_08:20:59.94672   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-22_08:20:59.94672   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-22_08:20:59.94673   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-22_08:20:59.94673   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-22_08:20:59.94674   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-22_08:20:59.94675   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-22_08:20:59.94676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-22_08:20:59.94676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-22_08:20:59.94676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-22_08:20:59.94676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-22_08:20:59.94676   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-22_08:20:59.94677   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-22_08:20:59.94677   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-22_08:20:59.94677   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-22_08:20:59.94678   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-22_08:20:59.94678   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-22_08:20:59.94679   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-22_08:20:59.94679   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-22_08:20:59.94679   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:20:59.94679   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-22_08:20:59.94679   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-22_08:20:59.94680   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:20:59.94680   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-22_08:20:59.94681   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-22_08:20:59.94681   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-22_08:20:59.94681   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-22_08:20:59.94682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-22_08:20:59.94682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-22_08:20:59.94682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-22_08:20:59.94682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-22_08:20:59.94682   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-22_08:20:59.94683   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-22_08:20:59.94684   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-22_08:20:59.94684   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-22_08:20:59.94684   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-22_08:20:59.94685   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-22_08:20:59.94685   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-22_08:20:59.94685   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-22_08:20:59.94685   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-22_08:20:59.94685   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-22_08:20:59.94686   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-22_08:20:59.94686   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-22_08:20:59.94687   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-22_08:20:59.94687   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-22_08:20:59.94687   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-22_08:20:59.94687   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-22_08:20:59.94688   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-22_08:20:59.94688   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-22_08:20:59.94688   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-22_08:20:59.94688   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-22_08:20:59.94688   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-22_08:20:59.94689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-22_08:20:59.94689   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-22_08:20:59.94689   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-22_08:20:59.94690   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-22_08:20:59.94690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-22_08:20:59.94690   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-22_08:20:59.94691   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-22_08:20:59.94691   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-22_08:20:59.94691   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-22_08:20:59.94691   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-22_08:20:59.94692   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-22_08:20:59.94692   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-22_08:20:59.94692   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-22_08:20:59.94693   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-22_08:20:59.94693   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-22_08:20:59.94693   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-22_08:21:00.94060 {"timestamp":"2020-10-22T08:21:00.940Z","pid":1008,"message":"Puma starting in cluster mode..."}
2020-10-22_08:21:00.94064 {"timestamp":"2020-10-22T08:21:00.940Z","pid":1008,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-22_08:21:00.94065 {"timestamp":"2020-10-22T08:21:00.940Z","pid":1008,"message":"* Min threads: 4, max threads: 4"}
2020-10-22_08:21:00.94067 {"timestamp":"2020-10-22T08:21:00.940Z","pid":1008,"message":"* Environment: production"}
2020-10-22_08:21:00.94067 {"timestamp":"2020-10-22T08:21:00.940Z","pid":1008,"message":"* Process workers: 2"}
2020-10-22_08:21:00.94072 {"timestamp":"2020-10-22T08:21:00.940Z","pid":1008,"message":"* Preloading application"}
2020-10-22_08:21:16.84884 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-22_08:21:17.55227 {"timestamp":"2020-10-22T08:21:17.552Z","pid":1008,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-22_08:21:17.55241 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-22_08:21:17.55250 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-22_08:21:17.55250   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-22_08:21:17.55251   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-22_08:21:17.55251   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-22_08:21:17.55251   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-22_08:21:17.55251   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-22_08:21:17.55251   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-22_08:21:17.55252   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-22_08:21:17.55252   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-22_08:21:17.55252   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-22_08:21:17.55252   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-22_08:21:17.55252   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-22_08:21:17.55253   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-22_08:21:17.55254   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-22_08:21:17.55254   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-22_08:21:17.55254   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-22_08:21:17.55254   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-22_08:21:17.55254   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-22_08:21:17.55255   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-22_08:21:17.55255   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-22_08:21:17.55255   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-22_08:21:17.55255   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-22_08:21:17.55255   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-22_08:21:17.55256   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-22_08:21:17.55257   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-22_08:21:17.55258   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-22_08:21:17.55258   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-22_08:21:17.55258   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:21:17.55258   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-22_08:21:17.55259   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-22_08:21:17.55259   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:21:17.55259   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-22_08:21:17.55260   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-22_08:21:17.55260   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-22_08:21:17.55260   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-22_08:21:17.55261   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-22_08:21:17.55261   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-22_08:21:17.55261   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-22_08:21:17.55261   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-22_08:21:17.55261   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-22_08:21:17.55262   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-22_08:21:17.55263   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-22_08:21:17.55263   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-22_08:21:17.55263   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-22_08:21:17.55263   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-22_08:21:17.55263   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-22_08:21:17.55264   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-22_08:21:17.55264   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-22_08:21:17.55264   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-22_08:21:17.55264   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-22_08:21:17.55264   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-22_08:21:17.55265   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-22_08:21:17.55266   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-22_08:21:17.55266   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-22_08:21:17.55266   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-22_08:21:17.55266   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-22_08:21:17.55267   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-22_08:21:17.55267   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-22_08:21:17.55267   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-22_08:21:17.55267   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-22_08:21:17.55267   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-22_08:21:17.55268   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-22_08:21:17.55268   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-22_08:21:17.55269   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-22_08:21:17.55269   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-22_08:21:17.55269   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-22_08:21:17.55269   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-22_08:21:17.55270   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-22_08:21:17.55270   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-22_08:21:17.55270   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-22_08:21:17.55270   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-22_08:21:17.55270   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-22_08:21:17.55271   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-22_08:21:17.55272   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-22_08:21:17.55272   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-22_08:21:17.55272   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-22_08:21:18.60109 {"timestamp":"2020-10-22T08:21:18.601Z","pid":1407,"message":"Puma starting in cluster mode..."}
2020-10-22_08:21:18.60218 {"timestamp":"2020-10-22T08:21:18.602Z","pid":1407,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-22_08:21:18.60227 {"timestamp":"2020-10-22T08:21:18.602Z","pid":1407,"message":"* Min threads: 4, max threads: 4"}
2020-10-22_08:21:18.60235 {"timestamp":"2020-10-22T08:21:18.602Z","pid":1407,"message":"* Environment: production"}
2020-10-22_08:21:18.60243 {"timestamp":"2020-10-22T08:21:18.602Z","pid":1407,"message":"* Process workers: 2"}
2020-10-22_08:21:18.60251 {"timestamp":"2020-10-22T08:21:18.602Z","pid":1407,"message":"* Preloading application"}
2020-10-22_08:21:34.65528 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-22_08:21:35.38416 {"timestamp":"2020-10-22T08:21:35.384Z","pid":1407,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-22_08:21:35.38448 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-22_08:21:35.38455 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-22_08:21:35.38456   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-22_08:21:35.38456   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-22_08:21:35.38463   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-22_08:21:35.38463   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-22_08:21:35.38464   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-22_08:21:35.38464   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-22_08:21:35.38464   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-22_08:21:35.38464   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-22_08:21:35.38465   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-22_08:21:35.38465   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-22_08:21:35.38465   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-22_08:21:35.38465   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-22_08:21:35.38466   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-22_08:21:35.38467   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-22_08:21:35.38467   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-22_08:21:35.38467   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-22_08:21:35.38467   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-22_08:21:35.38468   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-22_08:21:35.38468   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-22_08:21:35.38468   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-22_08:21:35.38468   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-22_08:21:35.38469   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-22_08:21:35.38470   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-22_08:21:35.38470   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-22_08:21:35.38470   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-22_08:21:35.38470   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-22_08:21:35.38471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:21:35.38471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-22_08:21:35.38471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-22_08:21:35.38471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:21:35.38471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-22_08:21:35.38473   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-22_08:21:35.38473   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-22_08:21:35.38473   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-22_08:21:35.38474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-22_08:21:35.38474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-22_08:21:35.38474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-22_08:21:35.38474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-22_08:21:35.38474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-22_08:21:35.38476   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-22_08:21:35.38476   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-22_08:21:35.38476   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-22_08:21:35.38476   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-22_08:21:35.38476   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-22_08:21:35.38477   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-22_08:21:35.38477   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-22_08:21:35.38477   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-22_08:21:35.38477   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-22_08:21:35.38478   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-22_08:21:35.38478   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-22_08:21:35.38479   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-22_08:21:35.38479   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-22_08:21:35.38479   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-22_08:21:35.38479   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-22_08:21:35.38480   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-22_08:21:35.38480   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-22_08:21:35.38480   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-22_08:21:35.38480   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-22_08:21:35.38481   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-22_08:21:35.38481   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-22_08:21:35.38481   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-22_08:21:35.38481   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-22_08:21:35.38482   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-22_08:21:35.38482   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-22_08:21:35.38483   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-22_08:21:35.38483   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-22_08:21:35.38483   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-22_08:21:35.38483   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-22_08:21:35.38484   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-22_08:21:35.38484   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-22_08:21:35.38484   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-22_08:21:35.38485   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-22_08:21:35.38486   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-22_08:21:35.38486   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-22_08:21:35.38486   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-22_08:21:36.28409 {"timestamp":"2020-10-22T08:21:36.284Z","pid":1950,"message":"Puma starting in cluster mode..."}
2020-10-22_08:21:36.28421 {"timestamp":"2020-10-22T08:21:36.284Z","pid":1950,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-22_08:21:36.28432 {"timestamp":"2020-10-22T08:21:36.284Z","pid":1950,"message":"* Min threads: 4, max threads: 4"}
2020-10-22_08:21:36.28442 {"timestamp":"2020-10-22T08:21:36.284Z","pid":1950,"message":"* Environment: production"}
2020-10-22_08:21:36.28449 {"timestamp":"2020-10-22T08:21:36.284Z","pid":1950,"message":"* Process workers: 2"}
2020-10-22_08:21:36.28462 {"timestamp":"2020-10-22T08:21:36.284Z","pid":1950,"message":"* Preloading application"}
2020-10-22_08:21:49.92294 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-22_08:21:50.72380 {"timestamp":"2020-10-22T08:21:50.723Z","pid":1950,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-22_08:21:50.72419 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-22_08:21:50.72450 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-22_08:21:50.72451   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-22_08:21:50.72452   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-22_08:21:50.72452   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-22_08:21:50.72452   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-22_08:21:50.72452   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-22_08:21:50.72453   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-22_08:21:50.72453   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-22_08:21:50.72453   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-22_08:21:50.72454   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-22_08:21:50.72454   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-22_08:21:50.72454   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-22_08:21:50.72455   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-22_08:21:50.72456   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-22_08:21:50.72456   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-22_08:21:50.72457   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-22_08:21:50.72458   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-22_08:21:50.72458   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-22_08:21:50.72458   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-22_08:21:50.72459   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-22_08:21:50.72459   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-22_08:21:50.72459   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-22_08:21:50.72460   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-22_08:21:50.72461   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-22_08:21:50.72461   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-22_08:21:50.72462   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-22_08:21:50.72462   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-22_08:21:50.72462   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:21:50.72463   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-22_08:21:50.72463   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-22_08:21:50.72463   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:21:50.72464   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-22_08:21:50.72465   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-22_08:21:50.72465   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-22_08:21:50.72466   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-22_08:21:50.72466   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-22_08:21:50.72466   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-22_08:21:50.72467   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-22_08:21:50.72467   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-22_08:21:50.72467   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-22_08:21:50.72469   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-22_08:21:50.72469   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-22_08:21:50.72469   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-22_08:21:50.72470   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-22_08:21:50.72470   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-22_08:21:50.72470   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-22_08:21:50.72471   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-22_08:21:50.72471   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-22_08:21:50.72471   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-22_08:21:50.72472   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-22_08:21:50.72472   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-22_08:21:50.72473   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-22_08:21:50.72474   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-22_08:21:50.72474   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-22_08:21:50.72474   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-22_08:21:50.72474   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-22_08:21:50.72475   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-22_08:21:50.72475   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-22_08:21:50.72475   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-22_08:21:50.72476   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-22_08:21:50.72476   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-22_08:21:50.72476   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-22_08:21:50.72477   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-22_08:21:50.72478   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-22_08:21:50.72478   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-22_08:21:50.72479   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-22_08:21:50.72479   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-22_08:21:50.72479   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-22_08:21:50.72479   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-22_08:21:50.72480   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-22_08:21:50.72480   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-22_08:21:50.72480   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-22_08:21:50.72481   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-22_08:21:50.72482   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-22_08:21:50.72482   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-22_08:21:50.72483   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-22_08:21:51.59099 {"timestamp":"2020-10-22T08:21:51.590Z","pid":2409,"message":"Puma starting in cluster mode..."}
2020-10-22_08:21:51.59112 {"timestamp":"2020-10-22T08:21:51.591Z","pid":2409,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-22_08:21:51.59142 {"timestamp":"2020-10-22T08:21:51.591Z","pid":2409,"message":"* Min threads: 4, max threads: 4"}
2020-10-22_08:21:51.59159 {"timestamp":"2020-10-22T08:21:51.591Z","pid":2409,"message":"* Environment: production"}
2020-10-22_08:21:51.59180 {"timestamp":"2020-10-22T08:21:51.591Z","pid":2409,"message":"* Process workers: 2"}
2020-10-22_08:21:51.59197 {"timestamp":"2020-10-22T08:21:51.591Z","pid":2409,"message":"* Preloading application"}
2020-10-22_08:22:04.72920 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-22_08:22:05.51095 {"timestamp":"2020-10-22T08:22:05.510Z","pid":2409,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-22_08:22:05.51128 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-22_08:22:05.51145 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-22_08:22:05.51146   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-22_08:22:05.51147   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-22_08:22:05.51147   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-22_08:22:05.51147   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-22_08:22:05.51147   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-22_08:22:05.51148   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-22_08:22:05.51148   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-22_08:22:05.51148   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-22_08:22:05.51148   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-22_08:22:05.51149   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-22_08:22:05.51149   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-22_08:22:05.51149   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-22_08:22:05.51150   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-22_08:22:05.51150   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-22_08:22:05.51151   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-22_08:22:05.51151   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-22_08:22:05.51151   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-22_08:22:05.51151   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-22_08:22:05.51152   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-22_08:22:05.51152   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-22_08:22:05.51152   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-22_08:22:05.51152   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-22_08:22:05.51153   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-22_08:22:05.51154   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-22_08:22:05.51154   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-22_08:22:05.51154   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-22_08:22:05.51155   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:22:05.51155   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-22_08:22:05.51156   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-22_08:22:05.51156   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:22:05.51156   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-22_08:22:05.51157   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-22_08:22:05.51157   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-22_08:22:05.51158   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-22_08:22:05.51158   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-22_08:22:05.51158   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-22_08:22:05.51158   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-22_08:22:05.51159   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-22_08:22:05.51159   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-22_08:22:05.51160   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-22_08:22:05.51160   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-22_08:22:05.51160   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-22_08:22:05.51161   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-22_08:22:05.51161   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-22_08:22:05.51161   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-22_08:22:05.51161   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-22_08:22:05.51162   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-22_08:22:05.51162   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-22_08:22:05.51162   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-22_08:22:05.51162   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-22_08:22:05.51163   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-22_08:22:05.51164   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-22_08:22:05.51164   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-22_08:22:05.51164   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-22_08:22:05.51164   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-22_08:22:05.51165   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-22_08:22:05.51165   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-22_08:22:05.51165   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-22_08:22:05.51166   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-22_08:22:05.51166   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-22_08:22:05.51166   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-22_08:22:05.51166   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-22_08:22:05.51167   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-22_08:22:05.51167   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-22_08:22:05.51168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-22_08:22:05.51168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-22_08:22:05.51168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-22_08:22:05.51168   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-22_08:22:05.51169   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-22_08:22:05.51169   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-22_08:22:05.51169   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-22_08:22:05.51169   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-22_08:22:05.51171   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-22_08:22:05.51171   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-22_08:22:05.51171   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-22_08:22:06.41243 {"timestamp":"2020-10-22T08:22:06.412Z","pid":2858,"message":"Puma starting in cluster mode..."}
2020-10-22_08:22:06.41268 {"timestamp":"2020-10-22T08:22:06.412Z","pid":2858,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-22_08:22:06.41283 {"timestamp":"2020-10-22T08:22:06.412Z","pid":2858,"message":"* Min threads: 4, max threads: 4"}
2020-10-22_08:22:06.41298 {"timestamp":"2020-10-22T08:22:06.412Z","pid":2858,"message":"* Environment: production"}
2020-10-22_08:22:06.41313 {"timestamp":"2020-10-22T08:22:06.413Z","pid":2858,"message":"* Process workers: 2"}
2020-10-22_08:22:06.41344 {"timestamp":"2020-10-22T08:22:06.413Z","pid":2858,"message":"* Preloading application"}
2020-10-22_08:22:19.18963 Rails Error: Unable to access log file. Please ensure that /opt/gitlab/embedded/service/gitlab-rails/log/production.log exists and is writable (ie, make it writable for user and group: chmod 0664 /opt/gitlab/embedded/service/gitlab-rails/log/production.log). The log level has been raised to WARN and the output directed to STDERR until the problem is fixed.
2020-10-22_08:22:20.90928 {"timestamp":"2020-10-22T08:22:20.909Z","pid":2858,"message":"! Unable to load application: Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log"}
2020-10-22_08:22:20.91727 bundler: failed to load command: puma (/opt/gitlab/embedded/bin/puma)
2020-10-22_08:22:20.91751 Errno::EACCES: Permission denied @ rb_sysopen - /opt/gitlab/embedded/service/gitlab-rails/log/application.log
2020-10-22_08:22:20.91753   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `initialize'
2020-10-22_08:22:20.91754   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open'
2020-10-22_08:22:20.91754   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:744:in `open_logfile'
2020-10-22_08:22:20.91754   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:736:in `set_dev'
2020-10-22_08:22:20.91756   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:671:in `initialize'
2020-10-22_08:22:20.91756   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `new'
2020-10-22_08:22:20.91756   /opt/gitlab/embedded/lib/ruby/2.6.0/logger.rb:387:in `initialize'
2020-10-22_08:22:20.91757   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `new'
2020-10-22_08:22:20.91757   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/logger.rb:36:in `build'
2020-10-22_08:22:20.91757   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `block in warn'
2020-10-22_08:22:20.91757   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `each'
2020-10-22_08:22:20.91758   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/multi_destination_logger.rb:18:in `warn'
2020-10-22_08:22:20.91759   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:58:in `rescue in current'
2020-10-22_08:22:20.91759   /opt/gitlab/embedded/service/gitlab-rails/app/models/concerns/cacheable_attributes.rb:51:in `current'
2020-10-22_08:22:20.91760   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:48:in `uncached_application_settings'
2020-10-22_08:22:20.91760   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:30:in `ensure_application_settings!'
2020-10-22_08:22:20.91760   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `block in current_application_settings'
2020-10-22_08:22:20.91760   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/null_request_store.rb:34:in `fetch'
2020-10-22_08:22:20.91760   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/safe_request_store.rb:12:in `fetch'
2020-10-22_08:22:20.91761   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:7:in `current_application_settings'
2020-10-22_08:22:20.91761   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/current_settings.rb:20:in `method_missing'
2020-10-22_08:22:20.91761   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:100:in `prometheus_metrics_enabled_unmemoized'
2020-10-22_08:22:20.91766   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:26:in `block in prometheus_metrics_enabled?'
2020-10-22_08:22:20.91767   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/utils/strong_memoize.rb:30:in `strong_memoize'
2020-10-22_08:22:20.91767   /opt/gitlab/embedded/service/gitlab-rails/lib/gitlab/metrics/prometheus.rb:25:in `prometheus_metrics_enabled?'
2020-10-22_08:22:20.91767   /opt/gitlab/embedded/service/gitlab-rails/config/initializers/7_prometheus_metrics.rb:41:in `<top (required)>'
2020-10-22_08:22:20.91768   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:22:20.91768   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `block in load'
2020-10-22_08:22:20.91768   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:291:in `load_dependency'
2020-10-22_08:22:20.91768   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/dependencies.rb:318:in `load'
2020-10-22_08:22:20.91769   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:666:in `block in load_config_initializer'
2020-10-22_08:22:20.91789   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/activesupport-6.0.3.1/lib/active_support/notifications.rb:182:in `instrument'
2020-10-22_08:22:20.91790   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:665:in `load_config_initializer'
2020-10-22_08:22:20.91790   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:625:in `block (2 levels) in <class:Engine>'
2020-10-22_08:22:20.91790   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `each'
2020-10-22_08:22:20.91791   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/engine.rb:624:in `block in <class:Engine>'
2020-10-22_08:22:20.91791   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `instance_exec'
2020-10-22_08:22:20.91791   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:32:in `run'
2020-10-22_08:22:20.91791   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:61:in `block in run_initializers'
2020-10-22_08:22:20.91793   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'
2020-10-22_08:22:20.91793   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'
2020-10-22_08:22:20.91793   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'
2020-10-22_08:22:20.91793   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'
2020-10-22_08:22:20.91793   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:421:in `block in each_strongly_connected_component_from'
2020-10-22_08:22:20.91794   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `each'
2020-10-22_08:22:20.91794   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:50:in `tsort_each_child'
2020-10-22_08:22:20.91794   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `call'
2020-10-22_08:22:20.91794   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:415:in `each_strongly_connected_component_from'
2020-10-22_08:22:20.91795   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'
2020-10-22_08:22:20.91795   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each'
2020-10-22_08:22:20.91801   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `call'
2020-10-22_08:22:20.91801   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'
2020-10-22_08:22:20.91801   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'
2020-10-22_08:22:20.91801   /opt/gitlab/embedded/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'
2020-10-22_08:22:20.91802   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/initializable.rb:60:in `run_initializers'
2020-10-22_08:22:20.91802   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/railties-6.0.3.1/lib/rails/application.rb:363:in `initialize!'
2020-10-22_08:22:20.91802   /opt/gitlab/embedded/service/gitlab-rails/config/environment.rb:5:in `<top (required)>'
2020-10-22_08:22:20.91802   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `require'
2020-10-22_08:22:20.91803   /opt/gitlab/embedded/service/gitlab-rails/config.ru:18:in `block in <main>'
2020-10-22_08:22:20.91803   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `instance_eval'
2020-10-22_08:22:20.91803   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:55:in `initialize'
2020-10-22_08:22:20.91803   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `new'
2020-10-22_08:22:20.91804   /opt/gitlab/embedded/service/gitlab-rails/config.ru:in `<main>'
2020-10-22_08:22:20.91805   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `eval'
2020-10-22_08:22:20.91805   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:49:in `new_from_string'
2020-10-22_08:22:20.91819   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/rack-2.0.9/lib/rack/builder.rb:40:in `parse_file'
2020-10-22_08:22:20.91821   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:321:in `load_rackup'
2020-10-22_08:22:20.91822   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/configuration.rb:246:in `app'
2020-10-22_08:22:20.91822   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/runner.rb:155:in `load_and_bind'
2020-10-22_08:22:20.91823   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cluster.rb:413:in `run'
2020-10-22_08:22:20.91823   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/launcher.rb:172:in `run'
2020-10-22_08:22:20.91823   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/lib/puma/cli.rb:80:in `run'
2020-10-22_08:22:20.91824   /opt/gitlab/embedded/lib/ruby/gems/2.6.0/gems/gitlab-puma-4.3.5.gitlab.3/bin/puma:10:in `<top (required)>'
2020-10-22_08:22:20.91825   /opt/gitlab/embedded/bin/puma:23:in `load'
2020-10-22_08:22:20.91825   /opt/gitlab/embedded/bin/puma:23:in `<top (required)>'
2020-10-22_08:22:22.35891 {"timestamp":"2020-10-22T08:22:22.358Z","pid":3320,"message":"Puma starting in cluster mode..."}
2020-10-22_08:22:22.35894 {"timestamp":"2020-10-22T08:22:22.358Z","pid":3320,"message":"* Version 4.3.5.gitlab.3 (ruby 2.6.6-p146), codename: Mysterious Traveller"}
2020-10-22_08:22:22.35894 {"timestamp":"2020-10-22T08:22:22.358Z","pid":3320,"message":"* Min threads: 4, max threads: 4"}
2020-10-22_08:22:22.35895 {"timestamp":"2020-10-22T08:22:22.358Z","pid":3320,"message":"* Environment: production"}
2020-10-22_08:22:22.35895 {"timestamp":"2020-10-22T08:22:22.358Z","pid":3320,"message":"* Process workers: 2"}
2020-10-22_08:22:22.35896 {"timestamp":"2020-10-22T08:22:22.358Z","pid":3320,"message":"* Preloading application"}
2020-10-22_08:22:24.22591 Received TERM from runit, sending to process group (-PID)
2020-10-22_08:22:24.23605 {"timestamp":"2020-10-22T08:22:24.235Z","pid":3320,"message":"=== puma shutdown: 2020-10-22 08:22:24 +0000 ==="}
2020-10-22_08:22:24.23613 {"timestamp":"2020-10-22T08:22:24.236Z","pid":3320,"message":"- Goodbye!"}
2020-10-22_08:22:24.23648 {"timestamp":"2020-10-22T08:22:24.236Z","pid":3320,"message":"! Unable to load application: SignalException: SIGTERM"}
